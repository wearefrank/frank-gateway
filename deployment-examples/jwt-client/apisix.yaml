routes:
  - name: jwt_correct
    uri: /any/jwt-correct
    service_id: 1
    
  - name: jwt_wrong_client_id
    uri: /any/jwt-wrong-id
    service_id: 2

  - name: jwt_wrong_client_secret
    uri: /any/jwt-wrong-secret
    service_id: 3

  - name: jwt_wrong_token_endpoint
    uri: /any/jwt-wrong-endpoint
    service_id: 4


services:
  - id: 1
    name: "jwt-correct"
    upstream_id: 2
    plugins:
      jwt-client:
        use_cache: false
        grant_type: "client_credentials"
        token_endpoint: "http://host.docker.internal:9081/realms/fg-testing/protocol/openid-connect/token"
        client_id_field_name: "client_id"
        client_id_value: "oidc-test-client"
        custom_parameters: {
          "client_secret": "KVJEeHx2gaX8Sg0siDMtHD1z1zsxJUqx",
          }
        
  - id: 2
    name: "jwt-test-wrong-client_id"
    upstream_id: 2
    plugins:
      openid-connect-client:
        use_cache: false
        grant_type: "client_credentials"
        token_endpoint: "http://host.docker.internal:9081/realms/fg-testing/protocol/openid-connect/token"
        client_id: "fout"
        client_secret: "KVJEeHx2gaX8Sg0siDMtHD1z1zsxJUqx"

  - id: 3
    name: "jwt-test-wrong-client_secret"
    upstream_id: 2
    plugins:
      openid-connect-client:
        use_cache: false
        grant_type: "client_credentials"
        token_endpoint: "http://host.docker.internal:9081/realms/fg-testing/protocol/openid-connect/token"
        client_id: "oidc-test-client"
        client_secret: "fout"

  - id: 4
    name: "jwt-test-wrong-token_endpoint"
    upstream_id: 2
    plugins:
      openid-connect-client:
        use_cache: false
        grant_type: "client_credentials"
        token_endpoint: "http://host.docker.internal:9081/realms/fg-testing/protocol/openid-connect/fout"
        client_id: "oidc-test-client"
        client_secret: "KVJEeHx2gaX8Sg0siDMtHD1z1zsxJUqx"
        
upstreams:
  - id: 2
    name: "echo-upstream"
    desc: "echo API"
    type: roundrobin
    nodes:
        "host.docker.internal:80": 1
#END
