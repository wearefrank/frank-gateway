routes:
  - name: oidc_correct
    uri: /any/oidc-correct
    service_id: 1
    
  - name: oidc_wrong_client_id
    uri: /any/oidc-wrong-id
    service_id: 2

  - name: oidc_wrong_client_secret
    uri: /any/oidc-wrong-secret
    service_id: 3

  - name: oidc_wrong_token_endpoint
    uri: /any/oidc-wrong-endpoint
    service_id: 4


services:
  - id: 1
    name: "oidc-correct"
    upstream_id: 2
    plugins:
      openid-connect-client:
        use_cache: false
        grant_type: "client_credentials"
        token_endpoint: "http://keycloak:9081/realms/fg-testing/protocol/openid-connect/token"
        client_id: "oidc-test-client"
        client_secret: "KVJEeHx2gaX8Sg0siDMtHD1z1zsxJUqx"
        
  - id: 2
    name: "oidc-test-wrong-client_id"
    upstream_id: 2
    plugins:
      openid-connect-client:
        use_cache: false
        grant_type: "client_credentials"
        token_endpoint: "http://keycloak:9081/realms/fg-testing/protocol/openid-connect/token"
        client_id: "fout"
        client_secret: "KVJEeHx2gaX8Sg0siDMtHD1z1zsxJUqx"

  - id: 3
    name: "oidc-test-wrong-client_secret"
    upstream_id: 2
    plugins:
      openid-connect-client:
        use_cache: false
        grant_type: "client_credentials"
        token_endpoint: "http://keycloak:9081/realms/fg-testing/protocol/openid-connect/token"
        client_id: "oidc-test-client"
        client_secret: "fout"

  - id: 4
    name: "oidc-test-wrong-token_endpoint"
    upstream_id: 2
    plugins:
      openid-connect-client:
        use_cache: false
        grant_type: "client_credentials"
        token_endpoint: "http://keycloak:9081/realms/fg-testing/protocol/openid-connect/fout"
        client_id: "oidc-test-client"
        client_secret: "KVJEeHx2gaX8Sg0siDMtHD1z1zsxJUqx"
        
upstreams:
  - id: 2
    name: "echo-upstream"
    desc: "echo API"
    type: roundrobin
    nodes:
        "httpbun:80": 1
#END
