{"plugins":{"rocketmq-logger":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"priority":402,"schema":{"$comment":"this is a mark for our injected plugin schema","required":["nameserver_list","topic"],"type":"object","properties":{"batch_max_size":{"default":1000,"minimum":1,"type":"integer"},"meta_format":{"default":"default","enum":["default","origin"],"type":"string"},"nameserver_list":{"minItems":1,"items":{"type":"string"},"type":"array"},"tag":{"type":"string"},"use_tls":{"default":false,"type":"boolean"},"access_key":{"default":"","type":"string"},"secret_key":{"default":"","type":"string"},"include_resp_body_expr":{"minItems":1,"items":{"type":"array"},"type":"array"},"key":{"type":"string"},"include_resp_body":{"default":false,"type":"boolean"},"log_format":{"type":"object"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"name":{"type":"string","default":"rocketmq logger"},"include_req_body":{"default":false,"type":"boolean"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"include_req_body_expr":{"minItems":1,"items":{"type":"array"},"type":"array"},"buffer_duration":{"default":60,"minimum":1,"type":"integer"},"timeout":{"default":3,"type":"integer","minimum":1},"retry_delay":{"default":1,"minimum":0,"type":"integer"},"topic":{"type":"string"}},"encrypt_fields":["secret_key"]}},"echo":{"version":0.1,"priority":412,"schema":{"$comment":"this is a mark for our injected plugin schema","type":"object","minProperties":1,"properties":{"body":{"type":"string","description":"body to replace upstream response."},"before_body":{"type":"string","description":"body before the filter phase."},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"after_body":{"type":"string","description":"body after the modification of filter phase."},"headers":{"minProperties":1,"description":"new headers for response","type":"object"}},"anyOf":[{"required":["before_body"]},{"required":["body"]},{"required":["after_body"]}]}},"openwhisk":{"version":0.1,"priority":-1901,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"ssl_verify":{"default":true,"type":"boolean"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"keepalive":{"default":true,"type":"boolean"},"api_host":{"type":"string"},"action":{"maxLength":256,"pattern":"\\A([\\w]|[\\w][\\w@ .-]*[\\w@.-]+)\\z","type":"string"},"namespace":{"maxLength":256,"pattern":"\\A([\\w]|[\\w][\\w@ .-]*[\\w@.-]+)\\z","type":"string"},"result":{"default":true,"type":"boolean"},"package":{"maxLength":256,"pattern":"\\A([\\w]|[\\w][\\w@ .-]*[\\w@.-]+)\\z","type":"string"},"keepalive_pool":{"default":5,"type":"integer","minimum":1},"timeout":{"maximum":60000,"type":"integer","default":3000,"description":"timeout in milliseconds","minimum":1},"keepalive_timeout":{"default":60000,"type":"integer","minimum":1000},"service_token":{"type":"string"}},"required":["api_host","service_token","namespace","action"],"type":"object"}},"gzip":{"version":0.1,"priority":995,"schema":{"properties":{"types":{"default":["text/html"],"anyOf":[{"minItems":1,"items":{"minLength":1,"type":"string"},"type":"array"},{"enum":["*"]}]},"buffers":{"properties":{"number":{"default":32,"type":"integer","minimum":1},"size":{"default":4096,"type":"integer","minimum":1}},"default":{"number":32,"size":4096},"type":"object"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"http_version":{"default":1.1,"enum":[1.1,1]},"comp_level":{"maximum":9,"default":1,"type":"integer","minimum":1},"vary":{"type":"boolean"},"min_length":{"default":20,"type":"integer","minimum":1}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"chaitin-waf":{"metadata_schema":{"properties":{"nodes":{"minItems":1,"items":{"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:/]+$","type":"string"},"port":{"default":80,"type":"integer","minimum":1}},"required":["host"],"type":"object"},"type":"array"},"config":{"properties":{"keepalive_size":{"default":256,"type":"integer"},"connect_timeout":{"default":1000,"type":"integer"},"read_timeout":{"default":1000,"type":"integer"},"send_timeout":{"default":1000,"type":"integer"},"keepalive_timeout":{"default":60000,"type":"integer"},"req_body_size":{"default":1024,"type":"integer"}},"default":{},"type":"object"}},"required":["nodes"],"type":"object"},"version":0.1,"priority":2700,"schema":{"properties":{"append_waf_resp_header":{"default":true,"type":"boolean"},"append_waf_debug_header":{"default":false,"type":"boolean"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"match":{"items":{"properties":{"vars":{"type":"array"}},"type":"object"},"type":"array"},"config":{"properties":{"keepalive_size":{"type":"integer"},"connect_timeout":{"type":"integer"},"read_timeout":{"type":"integer"},"send_timeout":{"type":"integer"},"keepalive_timeout":{"type":"integer"},"req_body_size":{"type":"integer"}},"type":"object"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"body-transformer":{"version":0.1,"priority":1080,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"response":{"properties":{"template":{"type":"string"},"template_is_base64":{"type":"boolean"},"input_format":{"enum":["xml","json","encoded","args"],"type":"string"}},"required":["template"],"type":"object"},"request":{"properties":{"template":{"type":"string"},"template_is_base64":{"type":"boolean"},"input_format":{"enum":["xml","json","encoded","args"],"type":"string"}},"required":["template"],"type":"object"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"anyOf":[{"required":["request"]},{"required":["response"]},{"required":["request","response"]}],"type":"object"}},"real-ip":{"version":0.1,"priority":23000,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"trusted_addresses":{"minItems":1,"items":{"anyOf":[{"title":"IPv4","format":"ipv4","type":"string"},{"title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$","type":"string"},{"title":"IPv6","format":"ipv6","type":"string"},{"title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$","type":"string"}]},"type":"array"},"recursive":{"default":false,"type":"boolean"},"source":{"minLength":1,"type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"required":["source"],"type":"object"}},"sls-logger":{"version":0.1,"priority":406,"schema":{"$comment":"this is a mark for our injected plugin schema","required":["host","port","project","logstore","access_key_id","access_key_secret"],"type":"object","properties":{"host":{"type":"string"},"batch_max_size":{"default":1000,"minimum":1,"type":"integer"},"log_format":{"type":"object"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"buffer_duration":{"default":60,"minimum":1,"type":"integer"},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"project":{"type":"string"},"logstore":{"type":"string"},"include_req_body":{"default":false,"type":"boolean"},"access_key_secret":{"type":"string"},"retry_delay":{"default":1,"minimum":0,"type":"integer"},"port":{"type":"integer"},"timeout":{"default":5000,"type":"integer","minimum":1},"name":{"type":"string","default":"sls-logger"},"access_key_id":{"type":"string"}},"encrypt_fields":["access_key_secret"]}},"traffic-split":{"version":0.1,"priority":966,"schema":{"properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"rules":{"items":{"properties":{"weighted_upstreams":{"items":{"properties":{"upstream":{"oneOf":[{"required":["nodes"]},{"required":["service_name","discovery_type"]}],"additionalProperties":false,"type":"object","properties":{"type":{"description":"algorithms of load balancing","default":"roundrobin","type":"string"},"nodes":{"anyOf":[{"patternProperties":{".*":{"description":"weight of node","minimum":0,"type":"integer"}},"type":"object"},{"items":{"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"metadata":{"type":"object","description":"metadata of node"},"priority":{"description":"priority of node","default":0,"type":"integer"},"port":{"description":"port of node","minimum":1,"type":"integer"},"weight":{"description":"weight of node","minimum":0,"type":"integer"}},"required":["host","weight"],"type":"object"},"type":"array"}]},"labels":{"description":"key/value pairs to specify attributes","patternProperties":{".*":{"pattern":"^\\S+$","type":"string","maxLength":256,"description":"value of label","minLength":1}},"type":"object"},"discovery_type":{"type":"string","description":"discovery type"},"scheme":{"enum":["grpc","grpcs","http","https","tcp","tls","udp","kafka"],"description":"The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka.","default":"http"},"discovery_args":{"properties":{"namespace_id":{"type":"string","description":"namespace id"},"group_name":{"type":"string","description":"group name"}},"type":"object"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"service_name":{"maxLength":256,"minLength":1,"type":"string"},"name":{"maxLength":100,"minLength":1,"type":"string"},"pass_host":{"default":"pass","description":"mod of host passing","enum":["pass","node","rewrite"],"type":"string"},"upstream_host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"update_time":{"type":"integer"},"desc":{"maxLength":256,"type":"string"},"checks":{"anyOf":[{"required":["active"]},{"required":["active","passive"]}],"properties":{"active":{"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"healthy":{"properties":{"interval":{"default":1,"type":"integer","minimum":1},"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[200,302],"type":"array"},"successes":{"maximum":254,"default":2,"type":"integer","minimum":1}},"type":"object"},"concurrency":{"default":10,"type":"integer"},"http_path":{"default":"/","type":"string"},"https_verify_certificate":{"default":true,"type":"boolean"},"req_headers":{"minItems":1,"items":{"uniqueItems":true,"type":"string"},"type":"array"},"port":{"maximum":65535,"type":"integer","minimum":1},"timeout":{"default":1,"type":"number"},"unhealthy":{"properties":{"http_failures":{"maximum":254,"default":5,"type":"integer","minimum":1},"tcp_failures":{"maximum":254,"default":2,"type":"integer","minimum":1},"timeouts":{"maximum":254,"default":3,"type":"integer","minimum":1},"interval":{"default":1,"type":"integer","minimum":1},"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[429,404,500,501,502,503,504,505],"type":"array"}},"type":"object"},"type":{"enum":["http","https","tcp"],"default":"http","type":"string"}},"type":"object"},"passive":{"properties":{"unhealthy":{"properties":{"timeouts":{"maximum":254,"default":7,"type":"integer","minimum":0},"http_failures":{"maximum":254,"default":5,"type":"integer","minimum":0},"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[429,500,503],"type":"array"},"tcp_failures":{"maximum":254,"default":2,"type":"integer","minimum":0}},"type":"object"},"type":{"enum":["http","https","tcp"],"default":"http","type":"string"},"healthy":{"properties":{"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308],"type":"array"},"successes":{"maximum":254,"default":5,"type":"integer","minimum":0}},"type":"object"}},"type":"object"}},"additionalProperties":false,"type":"object"},"create_time":{"type":"integer"},"retries":{"minimum":0,"type":"integer"},"retry_timeout":{"minimum":0,"type":"number"},"hash_on":{"default":"vars","enum":["vars","header","cookie","consumer","vars_combinations"],"type":"string"},"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"timeout":{"properties":{"connect":{"exclusiveMinimum":0,"type":"number"},"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"}},"required":["connect","send","read"],"type":"object"},"keepalive_pool":{"properties":{"requests":{"default":1000,"minimum":1,"type":"integer"},"size":{"default":320,"minimum":1,"type":"integer"},"idle_timeout":{"default":60,"minimum":0,"type":"number"}},"type":"object"},"tls":{"properties":{"verify":{"description":"Turn on server certificate verification, currently only kafka upstream is supported","default":false,"type":"boolean"},"client_key":{"maxLength":65536,"type":"string","minLength":128},"client_cert_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"client_cert":{"maxLength":65536,"type":"string","minLength":128}},"dependencies":{"client_cert":{"required":["client_key"]},"client_cert_id":{"not":{"required":["client_cert","client_key"]}},"client_key":{"required":["client_cert"]}},"type":"object"}}},"weight":{"minimum":0,"description":"used to split traffic between differentupstreams for plugin configuration","default":1,"type":"integer"},"upstream_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]}},"type":"object"},"type":"array","minItems":1,"default":[{"weight":1}],"maxItems":20},"match":{"items":{"properties":{"vars":{"type":"array"}},"type":"object"},"type":"array"}},"type":"object"},"type":"array"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"fault-injection":{"version":0.1,"priority":11000,"schema":{"minProperties":1,"properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"abort":{"properties":{"percentage":{"maximum":100,"type":"integer","minimum":0},"body":{"minLength":0,"type":"string"},"vars":{"items":{"type":"array"},"maxItems":20,"type":"array"},"http_status":{"minimum":200,"type":"integer"},"headers":{"minProperties":1,"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}},"type":"object"}},"required":["http_status"],"type":"object"},"delay":{"properties":{"percentage":{"maximum":100,"type":"integer","minimum":0},"duration":{"minimum":0,"type":"number"},"vars":{"items":{"type":"array"},"maxItems":20,"type":"array"}},"required":["duration"],"type":"object"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"prometheus":{"version":0.2,"schema":{"properties":{"prefer_name":{"default":false,"type":"boolean"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"$comment":"this is a mark for our injected plugin schema","type":"object"},"priority":500},"udp-logger":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"host":{"type":"string"},"batch_max_size":{"default":1000,"minimum":1,"type":"integer"},"log_format":{"type":"object"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"name":{"type":"string","default":"udp logger"},"include_req_body":{"default":false,"type":"boolean"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"retry_delay":{"default":1,"minimum":0,"type":"integer"},"port":{"minimum":0,"type":"integer"},"timeout":{"default":3,"type":"integer","minimum":1},"buffer_duration":{"default":60,"minimum":1,"type":"integer"}},"required":["host","port"],"type":"object"},"priority":400},"proxy-mirror":{"version":0.1,"priority":1010,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"host":{"pattern":"^(http(s)?|grpc(s)?):\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?$","type":"string"},"path":{"pattern":"^/[^?&]+$","type":"string"},"path_concat_mode":{"description":"the concatenation mode for custom path","default":"replace","enum":["replace","prefix"],"type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"sample_ratio":{"maximum":1,"default":1,"type":"number","minimum":1e-05}},"required":["host"],"type":"object"}},"authz-casdoor":{"version":0.1,"priority":2559,"schema":{"$comment":"this is a mark for our injected plugin schema","required":["callback_url","endpoint_addr","client_id","client_secret"],"type":"object","properties":{"client_secret":{"type":"string"},"client_id":{"type":"string"},"callback_url":{"pattern":"^[^%?]+[^/]$","type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"endpoint_addr":{"pattern":"^[^%?]+[^/]$","type":"string"}},"encrypt_fields":["client_secret"]}},"skywalking-logger":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"priority":408,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"batch_max_size":{"default":1000,"minimum":1,"type":"integer"},"log_format":{"type":"object"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"service_name":{"default":"APISIX","type":"string"},"name":{"type":"string","default":"skywalking logger"},"include_req_body":{"default":false,"type":"boolean"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"retry_delay":{"default":1,"minimum":0,"type":"integer"},"buffer_duration":{"default":60,"minimum":1,"type":"integer"},"timeout":{"default":3,"type":"integer","minimum":1},"service_instance_name":{"default":"APISIX Instance Name","type":"string"},"endpoint_addr":{"pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?","type":"string"}},"required":["endpoint_addr"],"type":"object"}},"openid-connect":{"version":0.2,"priority":2599,"schema":{"$comment":"this is a mark for our injected plugin schema","required":["client_id","client_secret","discovery"],"type":"object","properties":{"client_secret":{"type":"string"},"iat_slack":{"description":"Tolerance of clock skew in seconds with the iat claim in an ID token.","default":120,"type":"integer"},"realm":{"default":"apisix","type":"string"},"client_id":{"type":"string"},"accept_unsupported_alg":{"description":"Ignore ID token signature to accept unsupported signature algorithm.","default":true,"type":"boolean"},"post_logout_redirect_uri":{"description":"the URI will be redirect when request logout_path","type":"string"},"access_token_expires_leeway":{"description":"Expiration leeway in seconds for access token renewal.","default":0,"type":"integer"},"unauth_action":{"description":"The action performed when client is not authorized. Use auth to redirect user to identity provider, deny to respond with 401 Unauthorized, and pass to allow the request regardless.","default":"auth","enum":["auth","deny","pass"],"type":"string"},"force_reauthorize":{"description":"Whether to execute the authorization flow when a token has been cached.","default":false,"type":"boolean"},"use_nonce":{"description":"Whether to include nonce parameter in authorization request.","default":false,"type":"boolean"},"public_key":{"type":"string"},"token_signing_alg_values_expected":{"type":"string"},"use_pkce":{"description":"when set to true the PKEC(Proof Key for Code Exchange) will be used.","default":false,"type":"boolean"},"ssl_verify":{"default":false,"type":"boolean"},"set_access_token_header":{"description":"Whether the access token should be added as a header to the request for downstream","default":true,"type":"boolean"},"cache_segment":{"type":"string","description":"Name of a cache segment to differentiate caches."},"access_token_in_authorization_header":{"description":"Whether the access token should be added in the Authorization header as opposed to the X-Access-Token header.","default":false,"type":"boolean"},"introspection_interval":{"description":"TTL of the cached and introspected access token in seconds.","default":0,"type":"integer"},"set_id_token_header":{"description":"Whether the ID token should be added in the X-ID-Token header to the request for downstream.","default":true,"type":"boolean"},"required_scopes":{"description":"List of scopes that are required to be granted to the access token","items":{"type":"string"},"type":"array"},"set_userinfo_header":{"description":"Whether the user info token should be added in the X-Userinfo header to the request for downstream.","default":true,"type":"boolean"},"redirect_uri":{"description":"auto append '.apisix/redirect' to ngx.var.uri if not configured","type":"string"},"set_refresh_token_header":{"description":"Whether the refresh token should be added in the X-Refresh-Token header to the request for downstream.","default":false,"type":"boolean"},"discovery":{"type":"string"},"authorization_params":{"type":"object","description":"Extra authorization params to the authorize endpoint"},"client_rsa_private_key":{"type":"string","description":"Client RSA private key used to sign JWT."},"client_rsa_private_key_id":{"type":"string","description":"Client RSA private key ID used to compute a signed JWT."},"client_jwt_assertion_expires_in":{"description":"Life duration of the signed JWT in seconds.","default":60,"type":"integer"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"introspection_expiry_claim":{"type":"string","description":"Name of the expiry claim that controls the cached access token TTL."},"jwt_verification_cache_ignore":{"description":"Whether to ignore cached verification and re-verify.","default":false,"type":"boolean"},"jwk_expires_in":{"description":"Expiration time for JWK cache in seconds.","default":86400,"type":"integer"},"revoke_tokens_on_logout":{"description":"Notify authorization server a previous token is no longer needed.","default":false,"type":"boolean"},"accept_none_alg":{"description":"Set to true if the OpenID provider does not sign its ID token.","default":false,"type":"boolean"},"token_endpoint_auth_method":{"default":"client_secret_basic","type":"string"},"bearer_only":{"default":false,"type":"boolean"},"timeout":{"description":"timeout in seconds","default":3,"type":"integer","minimum":1},"proxy_opts":{"description":"HTTP proxy server be used to access identity server.","properties":{"http_proxy_authorization":{"description":"Basic [base64 username:password].","type":"string"},"http_proxy":{"description":"HTTP proxy like: http://proxy-server:80.","type":"string"},"https_proxy":{"description":"HTTPS proxy like: http://proxy-server:80.","type":"string"},"no_proxy":{"description":"Comma separated list of hosts that should not be proxied.","type":"string"},"https_proxy_authorization":{"description":"Basic [base64 username:password].","type":"string"}},"type":"object"},"session":{"additionalProperties":false,"properties":{"secret":{"description":"the key used for the encrypt and HMAC calculation","minLength":16,"type":"string"}},"required":["secret"],"type":"object"},"scope":{"default":"openid","type":"string"},"introspection_endpoint_auth_method":{"default":"client_secret_basic","type":"string"},"renew_access_token_on_expiry":{"description":"Whether to attempt silently renewing the access token.","default":true,"type":"boolean"},"introspection_endpoint":{"type":"string"},"access_token_expires_in":{"type":"integer","description":"Lifetime of the access token in seconds if expires_in is not present."},"logout_path":{"default":"/logout","type":"string"},"refresh_session_interval":{"type":"integer","description":"Time interval to refresh user ID token without re-authentication."}},"encrypt_fields":["client_secret"]}},"opa":{"version":0.1,"priority":2001,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"host":{"type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"keepalive":{"default":true,"type":"boolean"},"policy":{"type":"string"},"ssl_verify":{"default":true,"type":"boolean"},"with_service":{"default":false,"type":"boolean"},"with_route":{"default":false,"type":"boolean"},"send_headers_upstream":{"minItems":1,"description":"list of headers to pass to upstream in request","items":{"type":"string"},"type":"array"},"keepalive_timeout":{"default":60000,"type":"integer","minimum":1000},"timeout":{"maximum":60000,"type":"integer","default":3000,"description":"timeout in milliseconds","minimum":1},"keepalive_pool":{"default":5,"type":"integer","minimum":1},"with_consumer":{"default":false,"type":"boolean"}},"required":["host","policy"],"type":"object"}},"uri-blocker":{"version":0.1,"priority":2900,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"block_rules":{"uniqueItems":true,"items":{"maxLength":4096,"type":"string","minLength":1},"type":"array"},"rejected_code":{"default":403,"type":"integer","minimum":200},"rejected_msg":{"minLength":1,"type":"string"},"case_insensitive":{"default":false,"type":"boolean"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"required":["block_rules"],"type":"object"}},"proxy-cache":{"version":0.2,"priority":1085,"schema":{"properties":{"cache_http_status":{"items":{"maximum":599,"description":"http response status","minimum":200,"type":"integer"},"uniqueItems":true,"minItems":1,"default":[200,301,404],"type":"array"},"cache_key":{"minItems":1,"default":["$host","$request_uri"],"items":{"description":"a key for caching","pattern":"(^[^\\$].+$|^\\$[0-9a-zA-Z_]+$)","type":"string"},"type":"array"},"cache_ttl":{"default":300,"type":"integer","minimum":1},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"hide_cache_headers":{"default":false,"type":"boolean"},"cache_control":{"default":false,"type":"boolean"},"cache_bypass":{"minItems":1,"items":{"pattern":"(^[^\\$].+$|^\\$[0-9a-zA-Z_]+$)","type":"string"},"type":"array"},"cache_strategy":{"enum":["disk","memory"],"default":"disk","type":"string"},"no_cache":{"minItems":1,"items":{"pattern":"(^[^\\$].+$|^\\$[0-9a-zA-Z_]+$)","type":"string"},"type":"array"},"cache_zone":{"maxLength":100,"default":"disk_cache_one","type":"string","minLength":1},"cache_method":{"items":{"description":"supported http method","enum":["GET","POST","HEAD"],"type":"string"},"uniqueItems":true,"minItems":1,"default":["GET","HEAD"],"type":"array"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"client-control":{"version":0.1,"priority":22000,"schema":{"properties":{"max_body_size":{"description":"Maximum message body size in bytes. No restriction when set to 0.","type":"integer","minimum":0},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"clickhouse-logger":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"priority":398,"schema":{"oneOf":[{"required":["endpoint_addr","user","password","database","logtable"]},{"required":["endpoint_addrs","user","password","database","logtable"]}],"type":"object","properties":{"batch_max_size":{"default":1000,"minimum":1,"type":"integer"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"include_resp_body_expr":{"minItems":1,"items":{"type":"array"},"type":"array"},"endpoint_addrs":{"minItems":1,"items":{"pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?","type":"string"},"type":"array"},"database":{"default":"","type":"string"},"include_resp_body":{"default":false,"type":"boolean"},"user":{"default":"","type":"string"},"log_format":{"type":"object"},"ssl_verify":{"default":true,"type":"boolean"},"retry_delay":{"default":1,"minimum":0,"type":"integer"},"password":{"default":"","type":"string"},"name":{"default":"clickhouse-logger","type":"string"},"include_req_body":{"default":false,"type":"boolean"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"include_req_body_expr":{"minItems":1,"items":{"type":"array"},"type":"array"},"buffer_duration":{"default":60,"minimum":1,"type":"integer"},"timeout":{"default":3,"type":"integer","minimum":1},"logtable":{"default":"","type":"string"},"endpoint_addr":{"pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?","type":"string"}},"$comment":"this is a mark for our injected plugin schema","encrypt_fields":["password"]}},"syslog":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"priority":401,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"pool_size":{"default":5,"type":"integer","minimum":5},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"flush_limit":{"default":4096,"type":"integer","minimum":1},"drop_limit":{"default":1048576,"type":"integer"},"sock_type":{"default":"tcp","enum":["tcp","udp"],"type":"string"},"host":{"type":"string"},"log_format":{"type":"object"},"tls":{"default":false,"type":"boolean"},"name":{"type":"string","default":"sys logger"},"include_req_body":{"default":false,"type":"boolean"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"retry_delay":{"default":1,"minimum":0,"type":"integer"},"buffer_duration":{"default":60,"minimum":1,"type":"integer"},"timeout":{"default":3000,"type":"integer","minimum":1},"port":{"type":"integer"},"batch_max_size":{"default":1000,"minimum":1,"type":"integer"}},"required":["host","port"],"type":"object"}},"openid-connect-client":{"metadata_schema":{},"version":0.1,"priority":1,"schema":{"$comment":"this is a mark for our injected plugin schema","required":["token_endpoint","client_id","client_secret"],"type":"object","properties":{"client_secret":{"type":"string"},"scope":{"type":"string"},"client_id":{"type":"string"},"default_expiration":{"maximum":100000,"type":"integer","default":300,"description":"default expiration of cached tokens, when expiration is not provided by IDP in token response","minimum":1},"token_endpoint":{"type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"resource_server":{"type":"string"}}}},"limit-size":{"metadata_schema":{},"version":0.1,"priority":1,"schema":{"properties":{"response_limit_unit":{"enum":["bytes","kilobytes","megabytes"],"default":"bytes","type":"string"},"full_response":{"description":"when set to false it only checks the response body. When set to true it checks the bytes received from the entire response","type":"integer"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"request_limit":{"type":"integer"},"request_limit_unit":{"enum":["bytes","kilobytes","megabytes"],"default":"bytes","type":"string"},"rejected_code":{"maximum":599,"default":413,"type":"integer","minimum":200},"rejected_msg":{"default":"size is too large","type":"string","minLength":1},"full_request":{"default":false,"description":"when set to false it only checks the request body. When set to true it checks the entire HTTP request","type":"boolean"},"response_limit":{"description":"limit of the response body returned from the Upstream. For the response only payload limit restrictions are available.","type":"integer"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"consumer-restriction":{"version":0.1,"priority":2400,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"rejected_msg":{"type":"string"},"type":{"enum":["consumer_name","service_id","route_id","consumer_group_id"],"default":"consumer_name","type":"string"},"blacklist":{"minItems":1,"items":{"type":"string"},"type":"array"},"whitelist":{"minItems":1,"items":{"type":"string"},"type":"array"},"allowed_by_methods":{"items":{"properties":{"user":{"type":"string"},"methods":{"minItems":1,"items":{"description":"HTTP method","enum":["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS","CONNECT","TRACE","PURGE"],"type":"string"},"type":"array"}},"type":"object"},"type":"array"},"rejected_code":{"default":403,"type":"integer","minimum":200}},"anyOf":[{"required":["blacklist"]},{"required":["whitelist"]},{"required":["allowed_by_methods"]}],"type":"object"}},"redirect":{"version":0.1,"priority":900,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"http_to_https":{"type":"boolean"},"uri":{"type":"string","pattern":"(\\\\\\$[0-9a-zA-Z_]+)|\\$\\{([0-9a-zA-Z_]+)\\}|\\$([0-9a-zA-Z_]+)|(\\$|[^$\\\\]+)","minLength":2},"append_query_string":{"default":false,"type":"boolean"},"ret_code":{"default":302,"type":"integer","minimum":200},"regex_uri":{"items":{"type":"string","description":"regex uri"},"type":"array","minItems":2,"description":"params for generating new uri that substitute from client uri, first param is regular expression, the second one is uri template","maxItems":2},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"encode_uri":{"default":false,"type":"boolean"}},"oneOf":[{"required":["uri"]},{"required":["regex_uri"]},{"required":["http_to_https"]}],"type":"object"}},"grpc-web":{"version":0.1,"priority":505,"schema":{"properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"limit-req":{"version":0.1,"priority":1001,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"rate":{"exclusiveMinimum":0,"type":"number"},"burst":{"minimum":0,"type":"number"},"key_type":{"enum":["var","var_combination"],"default":"var","type":"string"},"nodelay":{"default":false,"type":"boolean"},"allow_degradation":{"default":false,"type":"boolean"},"rejected_code":{"maximum":599,"default":503,"type":"integer","minimum":200},"rejected_msg":{"minLength":1,"type":"string"},"key":{"type":"string"}},"required":["rate","burst","key"],"type":"object"}},"loki-logger":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"priority":414,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"tenant_id":{"default":"fake","type":"string"},"log_labels":{"default":{"job":"apisix"},"type":"object","patternProperties":{".*":{"minLength":1,"type":"string"}}},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"include_resp_body_expr":{"minItems":1,"items":{"type":"array"},"type":"array"},"endpoint_addrs":{"minItems":1,"items":{"pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?","type":"string"},"type":"array"},"include_resp_body":{"default":false,"type":"boolean"},"ssl_verify":{"default":false,"type":"boolean"},"log_format":{"type":"object"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"keepalive":{"default":true,"type":"boolean"},"keepalive_timeout":{"description":"keepalive timeout in milliseconds","default":60000,"type":"integer","minimum":1000},"retry_delay":{"default":1,"minimum":0,"type":"integer"},"batch_max_size":{"default":1000,"minimum":1,"type":"integer"},"name":{"type":"string","default":"loki logger"},"include_req_body":{"default":false,"type":"boolean"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"include_req_body_expr":{"minItems":1,"items":{"type":"array"},"type":"array"},"buffer_duration":{"default":60,"minimum":1,"type":"integer"},"timeout":{"maximum":60000,"type":"integer","default":3000,"description":"timeout in milliseconds","minimum":1},"keepalive_pool":{"default":5,"type":"integer","minimum":1},"endpoint_uri":{"default":"/loki/api/v1/push","type":"string","minLength":1}},"required":["endpoint_addrs"],"type":"object"}},"kafka-logger":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"priority":403,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"producer_type":{"default":"async","enum":["async","sync"],"type":"string"},"batch_max_size":{"default":1000,"minimum":1,"type":"integer"},"required_acks":{"default":1,"enum":[1,-1],"type":"integer"},"cluster_name":{"default":1,"type":"integer","minimum":1},"producer_batch_num":{"default":200,"type":"integer","minimum":1},"producer_batch_size":{"default":1048576,"type":"integer","minimum":0},"producer_max_buffering":{"default":50000,"type":"integer","minimum":1},"producer_time_linger":{"default":1,"type":"integer","minimum":1},"meta_refresh_interval":{"default":30,"type":"integer","minimum":1},"include_resp_body_expr":{"minItems":1,"items":{"type":"array"},"type":"array"},"key":{"type":"string"},"include_resp_body":{"default":false,"type":"boolean"},"log_format":{"type":"object"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"broker_list":{"minProperties":1,"patternProperties":{".*":{"maximum":65535,"description":"the port of kafka broker","minimum":1,"type":"integer"}},"type":"object"},"retry_delay":{"default":1,"minimum":0,"type":"integer"},"kafka_topic":{"type":"string"},"name":{"type":"string","default":"kafka logger"},"include_req_body":{"default":false,"type":"boolean"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"include_req_body_expr":{"minItems":1,"items":{"type":"array"},"type":"array"},"buffer_duration":{"default":60,"minimum":1,"type":"integer"},"timeout":{"default":3,"type":"integer","minimum":1},"meta_format":{"default":"default","enum":["default","origin"],"type":"string"},"brokers":{"minItems":1,"uniqueItems":true,"items":{"properties":{"host":{"description":"the host of kafka broker","type":"string"},"sasl_config":{"properties":{"user":{"description":"user","type":"string"},"mechanism":{"default":"PLAIN","enum":["PLAIN"],"type":"string"},"password":{"description":"password","type":"string"}},"description":"sasl config","required":["user","password"],"type":"object"},"port":{"maximum":65535,"description":"the port of kafka broker","type":"integer","minimum":1}},"required":["host","port"],"type":"object"},"type":"array"}},"oneOf":[{"required":["broker_list","kafka_topic"]},{"required":["brokers","kafka_topic"]}],"type":"object"}},"ext-plugin-post-req":{"version":0.1,"priority":-3000,"schema":{"properties":{"conf":{"minItems":1,"items":{"properties":{"name":{"maxLength":128,"minLength":1,"type":"string"},"value":{"type":"string"}},"required":["name","value"],"type":"object"},"type":"array"},"allow_degradation":{"default":false,"type":"boolean"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"ai":{"priority":22900,"scope":"global","version":0.1,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}}}},"mocking":{"version":0.1,"priority":10900,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"response_example":{"type":"string"},"response_schema":{"type":"object"},"with_mock_header":{"default":true,"type":"boolean"},"response_headers":{"minProperties":1,"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}},"type":"object"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"response_status":{"default":200,"minimum":100,"type":"integer"},"content_type":{"default":"application/json;charset=utf8","type":"string"},"delay":{"default":0,"type":"integer"}},"anyOf":[{"required":["response_example"]},{"required":["response_schema"]}],"type":"object"}},"cas-auth":{"version":0.1,"priority":2597,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"idp_uri":{"type":"string"},"cas_callback_uri":{"type":"string"},"logout_uri":{"type":"string"}},"required":["idp_uri","cas_callback_uri","logout_uri"],"type":"object"}},"public-api":{"version":0.1,"priority":501,"schema":{"properties":{"uri":{"type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"zipkin":{"version":0.1,"priority":12011,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"server_addr":{"description":"default is $server_addr, you can specify your external ip address","pattern":"^[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}$","type":"string"},"endpoint":{"type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"service_name":{"description":"service name for zipkin reporter","default":"APISIX","type":"string"},"span_version":{"default":2,"enum":[1,2]},"sample_ratio":{"maximum":1,"type":"number","minimum":1e-05}},"required":["endpoint","sample_ratio"],"type":"object"}},"openfunction":{"version":0.1,"priority":-1902,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"ssl_verify":{"default":true,"type":"boolean"},"keepalive_pool":{"default":5,"type":"integer","minimum":1},"function_uri":{"type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"authorization":{"service_token":{"type":"string"}},"timeout":{"default":3000,"type":"integer","minimum":100},"keepalive_timeout":{"default":60000,"type":"integer","minimum":1000},"keepalive":{"default":true,"type":"boolean"}},"required":["function_uri"],"type":"object"}},"hmac-auth":{"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"type":"object","title":"work with route or service object"},"type":"auth","version":0.1,"consumer_schema":{"required":["access_key","secret_key"],"type":"object","properties":{"clock_skew":{"default":0,"type":"integer"},"signed_headers":{"items":{"maxLength":50,"type":"string","minLength":1},"type":"array"},"keep_headers":{"default":false,"type":"boolean","title":"whether to keep the http request header"},"encode_uri_params":{"default":true,"type":"boolean","title":"Whether to escape the uri parameter"},"validate_request_body":{"default":false,"type":"boolean","title":"A boolean value telling the plugin to enable body validation"},"access_key":{"maxLength":256,"type":"string","minLength":1},"secret_key":{"maxLength":256,"type":"string","minLength":1},"algorithm":{"enum":["hmac-sha1","hmac-sha256","hmac-sha512"],"default":"hmac-sha256","type":"string"},"max_req_body":{"default":524288,"type":"integer","title":"Max request body size"}},"title":"work with consumer object","encrypt_fields":["secret_key"]},"priority":2530},"aws-lambda":{"version":0.1,"priority":-1899,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"ssl_verify":{"default":true,"type":"boolean"},"keepalive_pool":{"default":5,"type":"integer","minimum":1},"function_uri":{"type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"authorization":{"properties":{"iam":{"properties":{"service":{"default":"execute-api","description":"the service that is receiving the request","type":"string"},"accesskey":{"description":"access key id from from aws iam console","type":"string"},"aws_region":{"default":"us-east-1","description":"the aws region that is receiving the request","type":"string"},"secretkey":{"description":"secret access key from from aws iam console","type":"string"}},"required":["accesskey","secretkey"],"type":"object"},"apikey":{"type":"string"}},"type":"object"},"timeout":{"default":3000,"type":"integer","minimum":100},"keepalive_timeout":{"default":60000,"type":"integer","minimum":1000},"keepalive":{"default":true,"type":"boolean"}},"required":["function_uri"],"type":"object"}},"wolf-rbac":{"schema":{"properties":{"header_prefix":{"default":"X-","type":"string"},"appid":{"default":"unset","type":"string"},"server":{"default":"http://127.0.0.1:12180","type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"$comment":"this is a mark for our injected plugin schema","type":"object"},"version":0.1,"priority":2555,"type":"auth"},"http-logger":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"priority":410,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"concat_method":{"default":"json","enum":["json","new_line"],"type":"string"},"batch_max_size":{"default":1000,"minimum":1,"type":"integer"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"uri":{"pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?","type":"string"},"include_resp_body_expr":{"minItems":1,"items":{"type":"array"},"type":"array"},"include_resp_body":{"default":false,"type":"boolean"},"ssl_verify":{"default":false,"type":"boolean"},"log_format":{"type":"object"},"name":{"type":"string","default":"http logger"},"include_req_body":{"default":false,"type":"boolean"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"retry_delay":{"default":1,"minimum":0,"type":"integer"},"buffer_duration":{"default":60,"minimum":1,"type":"integer"},"timeout":{"default":3,"type":"integer","minimum":1},"auth_header":{"type":"string"},"include_req_body_expr":{"minItems":1,"items":{"type":"array"},"type":"array"}},"required":["uri"],"type":"object"}},"workflow":{"version":0.1,"priority":1006,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"rules":{"items":{"properties":{"case":{"minItems":1,"items":{"anyOf":[{"type":"array"},{"type":"string"}]},"type":"array"},"actions":{"items":{"minItems":1,"type":"array"},"type":"array"}},"required":["case","actions"],"type":"object"},"type":"array"}},"required":["rules"],"type":"object"}},"key-auth":{"schema":{"properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"hide_credentials":{"default":false,"type":"boolean"},"header":{"default":"apikey","type":"string"},"query":{"default":"apikey","type":"string"}},"$comment":"this is a mark for our injected plugin schema","type":"object"},"type":"auth","version":0.1,"consumer_schema":{"encrypt_fields":["key"],"properties":{"key":{"type":"string"}},"required":["key"],"type":"object"},"priority":2500},"referer-restriction":{"version":0.1,"priority":2990,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"bypass_missing":{"default":false,"type":"boolean"},"message":{"maxLength":1024,"default":"Your referer host is not allowed","type":"string","minLength":1},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"blacklist":{"minItems":1,"items":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"type":"array"},"whitelist":{"minItems":1,"items":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"type":"array"}},"oneOf":[{"required":["whitelist"]},{"required":["blacklist"]}],"type":"object"}},"file-logger":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"priority":399,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"include_req_body":{"default":false,"type":"boolean"},"log_format":{"type":"object"},"include_req_body_expr":{"minItems":1,"items":{"type":"array"},"type":"array"},"match":{"items":{"type":"array"},"maxItems":20,"type":"array"},"include_resp_body_expr":{"minItems":1,"items":{"type":"array"},"type":"array"},"include_resp_body":{"default":false,"type":"boolean"},"path":{"type":"string"}},"required":["path"],"type":"object"}},"csrf":{"version":0.1,"priority":2980,"schema":{"$comment":"this is a mark for our injected plugin schema","required":["key"],"type":"object","properties":{"key":{"type":"string","description":"use to generate csrf token"},"expires":{"description":"expires time(s) for csrf token","default":7200,"type":"integer"},"name":{"description":"the csrf token name","default":"apisix-csrf-token","type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"encrypt_fields":["key"]}},"jwt-auth":{"schema":{"properties":{"hide_credentials":{"default":false,"type":"boolean"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"cookie":{"default":"jwt","type":"string"},"query":{"default":"jwt","type":"string"},"header":{"default":"authorization","type":"string"}},"$comment":"this is a mark for our injected plugin schema","type":"object"},"type":"auth","version":0.1,"consumer_schema":{"required":["key"],"type":"object","properties":{"base64_secret":{"default":false,"type":"boolean"},"lifetime_grace_period":{"default":0,"type":"integer","minimum":0},"key":{"type":"string"},"algorithm":{"enum":["HS256","HS512","RS256","ES256"],"default":"HS256","type":"string"},"secret":{"type":"string"},"exp":{"default":86400,"type":"integer","minimum":1}},"dependencies":{"algorithm":{"oneOf":[{"properties":{"algorithm":{"default":"HS256","enum":["HS256","HS512"]}}},{"required":["public_key","private_key"],"properties":{"public_key":{"type":"string"},"algorithm":{"enum":["RS256","ES256"]},"private_key":{"type":"string"}}}]}},"encrypt_fields":["secret","private_key"]},"priority":2510},"ext-plugin-pre-req":{"version":0.1,"priority":12000,"schema":{"properties":{"conf":{"minItems":1,"items":{"properties":{"name":{"maxLength":128,"minLength":1,"type":"string"},"value":{"type":"string"}},"required":["name","value"],"type":"object"},"type":"array"},"allow_degradation":{"default":false,"type":"boolean"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"ldap-auth":{"schema":{"$comment":"this is a mark for our injected plugin schema","required":["base_dn","ldap_uri"],"type":"object","properties":{"base_dn":{"type":"string"},"ldap_uri":{"type":"string"},"uid":{"default":"cn","type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"use_tls":{"default":false,"type":"boolean"},"tls_verify":{"default":false,"type":"boolean"}},"title":"work with route or service object"},"type":"auth","version":0.1,"consumer_schema":{"type":"object","properties":{"user_dn":{"type":"string"}},"required":["user_dn"],"title":"work with consumer object"},"priority":2540},"limit-count":{"version":0.5,"priority":1002,"schema":{"else":{"then":{"required":["redis_cluster_nodes","redis_cluster_name"],"properties":{"redis_cluster_nodes":{"minItems":1,"items":{"maxLength":100,"type":"string","minLength":2},"type":"array"},"redis_cluster_name":{"type":"string"},"redis_password":{"minLength":0,"type":"string"},"redis_cluster_ssl_verify":{"default":false,"type":"boolean"},"redis_timeout":{"default":1000,"type":"integer","minimum":1},"redis_cluster_ssl":{"default":false,"type":"boolean"}}},"if":{"properties":{"policy":{"enum":["redis-cluster"]}}}},"$comment":"this is a mark for our injected plugin schema","required":["count","time_window"],"type":"object","properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"group":{"type":"string"},"policy":{"enum":["local","redis","redis-cluster"],"default":"local","type":"string"},"show_limit_quota_header":{"default":true,"type":"boolean"},"count":{"exclusiveMinimum":0,"type":"integer"},"allow_degradation":{"default":false,"type":"boolean"},"rejected_code":{"maximum":599,"default":503,"type":"integer","minimum":200},"rejected_msg":{"minLength":1,"type":"string"},"key_type":{"enum":["var","var_combination","constant"],"default":"var","type":"string"},"time_window":{"exclusiveMinimum":0,"type":"integer"},"key":{"default":"remote_addr","type":"string"}},"then":{"required":["redis_host"],"properties":{"redis_ssl_verify":{"default":false,"type":"boolean"},"redis_host":{"minLength":2,"type":"string"},"redis_port":{"default":6379,"type":"integer","minimum":1},"redis_username":{"minLength":1,"type":"string"},"redis_password":{"minLength":0,"type":"string"},"redis_database":{"default":0,"type":"integer","minimum":0},"redis_timeout":{"default":1000,"type":"integer","minimum":1},"redis_ssl":{"default":false,"type":"boolean"}}},"if":{"properties":{"policy":{"enum":["redis"]}}}}},"splunk-hec-logging":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"ssl_verify":{"default":true,"type":"boolean"},"batch_max_size":{"default":1000,"minimum":1,"type":"integer"},"log_format":{"type":"object"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"name":{"type":"string","default":"splunk-hec-logging"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"endpoint":{"properties":{"channel":{"type":"string"},"timeout":{"default":10,"type":"integer","minimum":1},"uri":{"pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?","type":"string"},"token":{"type":"string"}},"required":["uri","token"],"type":"object"},"buffer_duration":{"default":60,"minimum":1,"type":"integer"},"retry_delay":{"default":1,"minimum":0,"type":"integer"}},"required":["endpoint"],"type":"object"},"priority":409},"azure-functions":{"metadata_schema":{"properties":{"master_clientid":{"default":"","type":"string"},"master_apikey":{"default":"","type":"string"}},"type":"object"},"version":0.1,"priority":-1900,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"ssl_verify":{"default":true,"type":"boolean"},"keepalive_pool":{"default":5,"type":"integer","minimum":1},"function_uri":{"type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"authorization":{"properties":{"clientid":{"type":"string"},"apikey":{"type":"string"}},"type":"object"},"timeout":{"default":3000,"type":"integer","minimum":100},"keepalive_timeout":{"default":60000,"type":"integer","minimum":1000},"keepalive":{"default":true,"type":"boolean"}},"required":["function_uri"],"type":"object"}},"google-cloud-logging":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"schema":{"oneOf":[{"required":["auth_config"]},{"required":["auth_file"]}],"type":"object","properties":{"ssl_verify":{"default":true,"type":"boolean"},"auth_file":{"type":"string"},"log_id":{"default":"apisix.apache.org%2Flogs","type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"auth_config":{"properties":{"token_uri":{"default":"https://oauth2.googleapis.com/token","type":"string"},"scopes":{"items":{"type":"string","description":"Google OAuth2 Authorization Scopes"},"uniqueItems":true,"minItems":1,"default":["https://www.googleapis.com/auth/logging.read","https://www.googleapis.com/auth/logging.write","https://www.googleapis.com/auth/logging.admin","https://www.googleapis.com/auth/cloud-platform"],"type":"array"},"private_key":{"type":"string"},"entries_uri":{"default":"https://logging.googleapis.com/v2/entries:write","type":"string"},"client_email":{"type":"string"},"project_id":{"type":"string"}},"required":["client_email","private_key","project_id","token_uri"],"type":"object"},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"resource":{"default":{"type":"global"},"properties":{"labels":{"type":"object"},"type":{"type":"string"}},"required":["type"],"type":"object"},"name":{"type":"string","default":"google-cloud-logging"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"retry_delay":{"default":1,"minimum":0,"type":"integer"},"buffer_duration":{"default":60,"minimum":1,"type":"integer"},"log_format":{"type":"object"},"batch_max_size":{"default":1000,"minimum":1,"type":"integer"}},"$comment":"this is a mark for our injected plugin schema","encrypt_fields":["auth_config.private_key"]},"priority":407},"example-plugin":{"metadata_schema":{"properties":{"skey":{"type":"string"},"ikey":{"minimum":0,"type":"number"}},"required":["ikey","skey"],"type":"object"},"version":0.1,"priority":0,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"t":{"minItems":1,"type":"array"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"ip":{"type":"string"},"s":{"type":"string"},"port":{"type":"integer"},"i":{"minimum":0,"type":"number"}},"required":["i"],"type":"object"}},"ip-restriction":{"version":0.1,"priority":3000,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"blacklist":{"minItems":1,"items":{"anyOf":[{"title":"IPv4","format":"ipv4","type":"string"},{"title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$","type":"string"},{"title":"IPv6","format":"ipv6","type":"string"},{"title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$","type":"string"}]},"type":"array"},"whitelist":{"minItems":1,"items":{"anyOf":[{"title":"IPv4","format":"ipv4","type":"string"},{"title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$","type":"string"},{"title":"IPv6","format":"ipv6","type":"string"},{"title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$","type":"string"}]},"type":"array"},"message":{"maxLength":1024,"default":"Your IP address is not allowed","type":"string","minLength":1},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"oneOf":[{"required":["whitelist"]},{"required":["blacklist"]}],"type":"object"}},"elasticsearch-logger":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"priority":413,"schema":{"oneOf":[{"required":["endpoint_addr","field"]},{"required":["endpoint_addrs","field"]}],"type":"object","properties":{"ssl_verify":{"default":true,"type":"boolean"},"batch_max_size":{"default":1000,"minimum":1,"type":"integer"},"log_format":{"type":"object"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"field":{"properties":{"index":{"type":"string"},"type":{"type":"string"}},"required":["index"],"type":"object"},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"name":{"type":"string","default":"elasticsearch-logger"},"buffer_duration":{"default":60,"minimum":1,"type":"integer"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"retry_delay":{"default":1,"minimum":0,"type":"integer"},"endpoint_addrs":{"minItems":1,"items":{"pattern":"[^/]$","type":"string"},"type":"array"},"timeout":{"default":10,"type":"integer","minimum":1},"auth":{"properties":{"password":{"minLength":1,"type":"string"},"username":{"minLength":1,"type":"string"}},"required":["username","password"],"type":"object"},"endpoint_addr":{"pattern":"[^/]$","type":"string"}},"$comment":"this is a mark for our injected plugin schema","encrypt_fields":["auth.password"]}},"grpc-transcode":{"version":0.1,"priority":506,"schema":{"$comment":"this is a mark for our injected plugin schema","required":["proto_id","service","method"],"type":"object","properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"status_detail_type":{"type":"string","description":"the message type of the grpc-status-details-bin's details part, if not given, the details part will not be decoded"},"show_status_in_body":{"description":"show decoded grpc-status-details-bin in response body","default":false,"type":"boolean"},"proto_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"service":{"type":"string","description":"the grpc service name"},"deadline":{"description":"deadline for grpc, millisecond","default":0,"type":"number"},"pb_option":{"minItems":1,"default":["enum_as_name","int64_as_number","auto_default_values","disable_hooks"],"items":{"anyOf":[{"description":"enum as result","enum":["int64_as_number","int64_as_string","int64_as_hexstring"],"type":"string"},{"description":"int64 as result","enum":["enum_as_name","enum_as_value"],"type":"string"},{"description":"default values option","enum":["auto_default_values","no_default_values","use_default_values","use_default_metatable"],"type":"string"},{"description":"hooks option","enum":["enable_hooks","disable_hooks"],"type":"string"}],"type":"string"},"type":"array"},"method":{"type":"string","description":"the method name in the grpc service."}},"additionalProperties":true}},"jwe-decrypt":{"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"strict":{"default":true,"type":"boolean"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"header":{"default":"Authorization","type":"string"},"forward_header":{"default":"Authorization","type":"string"}},"required":["header","forward_header"],"type":"object"},"type":"auth","version":0.1,"consumer_schema":{"properties":{"key":{"type":"string"},"is_base64_encoded":{"type":"boolean"},"secret":{"minLength":32,"type":"string"}},"required":["key","secret"],"type":"object"},"priority":2509},"proxy-rewrite":{"version":0.1,"priority":1008,"schema":{"minProperties":1,"properties":{"host":{"description":"new host for upstream","pattern":"^[0-9a-zA-Z-.]+(:\\d{1,5})?$","type":"string"},"uri":{"pattern":"^\\/.*","minLength":1,"maxLength":4096,"description":"new uri for upstream","type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"use_real_request_uri_unsafe":{"description":"use real_request_uri instead, THIS IS VERY UNSAFE.","default":false,"type":"boolean"},"regex_uri":{"minItems":2,"description":"new uri that substitute from client uri for upstream, lower priority than uri property","items":{"type":"string","description":"regex uri"},"type":"array"},"headers":{"oneOf":[{"minProperties":1,"properties":{"add":{"minProperties":1,"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}},"type":"object"},"remove":{"minItems":1,"items":{"pattern":"^[^:]+$","type":"string"},"type":"array"},"set":{"minProperties":1,"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}},"type":"object"}},"additionalProperties":false,"type":"object"},{"minProperties":1,"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}},"type":"object"}],"description":"new headers for request"},"method":{"description":"proxy route method","enum":["PUT","DELETE","MKCOL","COPY","MOVE","OPTIONS","PROPFIND","LOCK","UNLOCK","PATCH","TRACE","GET","HEAD","POST"],"type":"string"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"multi-auth":{"priority":2600,"version":0.1,"schema":{"$comment":"this is a mark for our injected plugin schema","required":["auth_plugins"],"type":"object","properties":{"auth_plugins":{"minItems":2,"type":"array"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"title":"work with route or service object"},"type":"auth"},"request-validation":{"priority":2800,"version":0.1,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"rejected_code":{"maximum":599,"default":400,"type":"integer","minimum":200},"rejected_msg":{"maxLength":256,"type":"string","minLength":1},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"header_schema":{"type":"object"},"body_schema":{"type":"object"}},"anyOf":[{"required":["header_schema"]},{"required":["body_schema"]}],"type":"object"},"type":"validation"},"authz-casbin":{"metadata_schema":{"properties":{"model":{"type":"string"},"policy":{"type":"string"}},"required":["model","policy"],"type":"object"},"version":0.1,"priority":2560,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"username":{"type":"string"},"model_path":{"type":"string"},"policy_path":{"type":"string"},"model":{"type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"policy":{"type":"string"}},"oneOf":[{"required":["model_path","policy_path","username"]},{"required":["model","policy","username"]}],"type":"object"}},"ext-plugin-post-resp":{"version":0.1,"priority":-4000,"schema":{"properties":{"conf":{"minItems":1,"items":{"properties":{"name":{"maxLength":128,"minLength":1,"type":"string"},"value":{"type":"string"}},"required":["name","value"],"type":"object"},"type":"array"},"allow_degradation":{"default":false,"type":"boolean"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"degraphql":{"version":0.1,"priority":509,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"operation_name":{"maxLength":1024,"type":"string","minLength":1},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"query":{"maxLength":1024,"type":"string","minLength":1},"variables":{"minItems":1,"items":{"type":"string"},"type":"array"}},"required":["query"],"type":"object"}},"limit-conn":{"version":0.1,"priority":1003,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"default_conn_delay":{"exclusiveMinimum":0,"type":"number"},"only_use_default_delay":{"default":false,"type":"boolean"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"burst":{"minimum":0,"type":"integer"},"key_type":{"enum":["var","var_combination"],"default":"var","type":"string"},"conn":{"exclusiveMinimum":0,"type":"integer"},"allow_degradation":{"default":false,"type":"boolean"},"rejected_code":{"maximum":599,"default":503,"type":"integer","minimum":200},"rejected_msg":{"minLength":1,"type":"string"},"key":{"type":"string"}},"required":["conn","burst","default_conn_delay","key"],"type":"object"}},"basic-auth":{"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"hide_credentials":{"default":false,"type":"boolean"}},"type":"object","title":"work with route or service object"},"type":"auth","version":0.1,"consumer_schema":{"required":["username","password"],"type":"object","properties":{"password":{"type":"string"},"username":{"type":"string"}},"title":"work with consumer object","encrypt_fields":["password"]},"priority":2520},"tencent-cloud-cls":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"priority":397,"schema":{"$comment":"this is a mark for our injected plugin schema","required":["cls_host","cls_topic","secret_id","secret_key"],"type":"object","properties":{"batch_max_size":{"default":1000,"minimum":1,"type":"integer"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"secret_key":{"type":"string"},"include_resp_body_expr":{"minItems":1,"items":{"type":"array"},"type":"array"},"include_resp_body":{"default":false,"type":"boolean"},"log_format":{"type":"object"},"cls_host":{"type":"string"},"include_req_body_expr":{"minItems":1,"items":{"type":"array"},"type":"array"},"cls_topic":{"type":"string"},"name":{"type":"string","default":"tencent-cloud-cls"},"include_req_body":{"default":false,"type":"boolean"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"retry_delay":{"default":1,"minimum":0,"type":"integer"},"buffer_duration":{"default":60,"minimum":1,"type":"integer"},"secret_id":{"type":"string"},"global_tag":{"type":"object"},"sample_ratio":{"maximum":1,"default":1,"type":"number","minimum":1e-05}},"encrypt_fields":["secret_key"]}},"api-breaker":{"version":0.1,"priority":1005,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"unhealthy":{"properties":{"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":500},"uniqueItems":true,"minItems":1,"default":[500],"type":"array"},"failures":{"default":3,"type":"integer","minimum":1}},"default":{"http_statuses":[500],"failures":3},"type":"object"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"break_response_code":{"maximum":599,"type":"integer","minimum":200},"break_response_body":{"type":"string"},"break_response_headers":{"items":{"properties":{"key":{"minLength":1,"type":"string"},"value":{"minLength":1,"type":"string"}},"required":["key","value"],"type":"object"},"type":"array"},"max_breaker_sec":{"default":300,"type":"integer","minimum":3},"healthy":{"properties":{"http_statuses":{"items":{"maximum":499,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[200],"type":"array"},"successes":{"default":3,"type":"integer","minimum":1}},"default":{"http_statuses":[200],"successes":3},"type":"object"}},"required":["break_response_code"],"type":"object"}},"request-id":{"version":0.1,"priority":12015,"schema":{"properties":{"include_in_response":{"default":true,"type":"boolean"},"range_id":{"properties":{"char_set":{"default":"abcdefghijklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ0123456789","type":"string","minLength":6},"length":{"default":16,"type":"integer","minimum":6}},"default":{},"type":"object"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"algorithm":{"enum":["uuid","nanoid","range_id"],"default":"uuid","type":"string"},"header_name":{"default":"X-Request-Id","type":"string"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"server-info":{"priority":990,"version":0.1,"scope":"global","schema":{"properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"authz-keycloak":{"version":0.1,"priority":2000,"schema":{"$comment":"this is a mark for our injected plugin schema","required":["client_id"],"type":"object","properties":{"client_secret":{"maxLength":100,"type":"string","minLength":1},"permissions":{"uniqueItems":true,"default":{},"items":{"maxLength":100,"type":"string","minLength":1},"type":"array"},"lazy_load_paths":{"default":false,"type":"boolean"},"client_id":{"maxLength":100,"type":"string","minLength":1},"cache_ttl_seconds":{"default":86400,"type":"integer","minimum":1},"access_denied_redirect_uri":{"maxLength":2048,"type":"string","minLength":1},"refresh_token_expires_in":{"default":3600,"type":"integer","minimum":1},"access_token_expires_leeway":{"default":0,"type":"integer","minimum":0},"password_grant_token_generation_incoming_uri":{"maxLength":4096,"type":"string","minLength":1},"ssl_verify":{"default":true,"type":"boolean"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"keepalive":{"default":true,"type":"boolean"},"refresh_token_expires_leeway":{"default":0,"type":"integer","minimum":0},"access_token_expires_in":{"default":300,"type":"integer","minimum":1},"grant_type":{"minLength":1,"maxLength":100,"default":"urn:ietf:params:oauth:grant-type:uma-ticket","type":"string","enum":["urn:ietf:params:oauth:grant-type:uma-ticket"]},"policy_enforcement_mode":{"enum":["ENFORCING","PERMISSIVE"],"default":"ENFORCING","type":"string"},"token_endpoint":{"maxLength":4096,"type":"string","minLength":1},"http_method_as_scope":{"default":false,"type":"boolean"},"keepalive_timeout":{"default":60000,"type":"integer","minimum":1000},"resource_registration_endpoint":{"maxLength":4096,"type":"string","minLength":1},"timeout":{"default":3000,"type":"integer","minimum":1000},"keepalive_pool":{"default":5,"type":"integer","minimum":1},"discovery":{"maxLength":4096,"type":"string","minLength":1}},"allOf":[{"anyOf":[{"required":["discovery"]},{"required":["token_endpoint"]}]},{"anyOf":[{"properties":{"lazy_load_paths":{"enum":[false]}}},{"anyOf":[{"required":["discovery"]},{"required":["resource_registration_endpoint"]}],"properties":{"lazy_load_paths":{"enum":[true]}}}]}],"encrypt_fields":["client_secret"]}},"ua-restriction":{"version":0.1,"priority":2999,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"bypass_missing":{"default":false,"type":"boolean"},"allowlist":{"minItems":1,"items":{"minLength":1,"type":"string"},"type":"array"},"denylist":{"minItems":1,"items":{"minLength":1,"type":"string"},"type":"array"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"message":{"maxLength":1024,"default":"Not allowed","type":"string","minLength":1}},"oneOf":[{"required":["allowlist"]},{"required":["denylist"]}],"type":"object"}},"cors":{"metadata_schema":{"properties":{"allow_origins":{"additionalProperties":{"pattern":"^(\\*|\\*\\*|null|\\w+://[^,]+(,\\w+://[^,]+)*)$","type":"string"},"type":"object"}},"type":"object"},"version":0.1,"priority":4000,"schema":{"properties":{"timing_allow_origins_by_regex":{"items":{"maxLength":4096,"type":"string","minLength":1},"type":"array","minItems":1,"description":"you can use regex to allow specific origins which can view timing information,for example use [.*\\.test.com] to allow a.test.com and b.test.com","uniqueItems":true},"allow_credential":{"description":"allow client append credential. according to CORS specification,if you set this option to 'true', you can not use '*' for other options.","default":false,"type":"boolean"},"allow_origins":{"default":"*","description":"you can use '*' to allow all origins when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple origin use ',' to split. default: *.","pattern":"^(\\*|\\*\\*|null|\\w+://[^,]+(,\\w+://[^,]+)*)$","type":"string"},"allow_origins_by_regex":{"items":{"maxLength":4096,"type":"string","minLength":1},"type":"array","minItems":1,"description":"you can use regex to allow specific origins when no credentials,for example use [.*\\.test.com$] to allow a.test.com and b.test.com","uniqueItems":true},"allow_methods":{"description":"you can use '*' to allow all methods when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple method use ',' to split. default: *.","default":"*","type":"string"},"allow_origins_by_metadata":{"items":{"maxLength":4096,"type":"string","minLength":1},"type":"array","minItems":1,"description":"set allowed origins by referencing origins in plugin metadata","uniqueItems":true},"allow_headers":{"description":"you can use '*' to allow all header when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple header use ',' to split. default: *.","default":"*","type":"string"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"timing_allow_origins":{"description":"you can use '*' to allow all origins which can view timing information when no credentials,'**' to allow forcefully (it will bring some security risks, be careful),multiple origin use ',' to split. default: nil","pattern":"^(\\*|\\*\\*|null|\\w+://[^,]+(,\\w+://[^,]+)*)$","type":"string"},"expose_headers":{"description":"you can use '*' to expose all header when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple header use ',' to split. default: *.","default":"*","type":"string"},"max_age":{"description":"maximum number of seconds the results can be cached.-1 means no cached, the max value is depend on browser,more details plz check MDN. default: 5.","default":5,"type":"integer"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"forward-auth":{"version":0.1,"priority":2002,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"ssl_verify":{"default":true,"type":"boolean"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"keepalive":{"default":true,"type":"boolean"},"request_method":{"description":"the method for client to request the authorization service","default":"GET","enum":["GET","POST"],"type":"string"},"request_headers":{"description":"client request header that will be sent to the authorization service","default":{},"items":{"type":"string"},"type":"array"},"keepalive_pool":{"default":5,"type":"integer","minimum":1},"uri":{"type":"string"},"keepalive_timeout":{"default":60000,"type":"integer","minimum":1000},"allow_degradation":{"default":false,"type":"boolean"},"timeout":{"maximum":60000,"type":"integer","default":3000,"description":"timeout in milliseconds","minimum":1},"upstream_headers":{"description":"authorization response header that will be sent to the upstream","default":{},"items":{"type":"string"},"type":"array"},"client_headers":{"description":"authorization response header that will be sent tothe client when authorizing failed","default":{},"items":{"type":"string"},"type":"array"}},"required":["uri"],"type":"object"}},"loggly":{"metadata_schema":{"properties":{"host":{"default":"logs-01.loggly.com","type":"string"},"log_format":{"type":"object"},"port":{"default":514,"type":"integer"},"timeout":{"default":5000,"type":"integer","minimum":1},"protocol":{"default":"syslog","enum":["syslog","http","https"],"type":"string"}},"type":"object"},"version":0.1,"priority":411,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"customer_token":{"type":"string"},"batch_max_size":{"default":1000,"minimum":1,"type":"integer"},"severity_map":{"patternProperties":{"^[1-5][0-9]{2}$":{"description":"keys are HTTP status code, values are severity","enum":["CRIT","crit","ERR","err","WARNING","warning","NOTICE","notice","INFO","info","DEBUG","debug","EMEGR","emegr","ALERT","alert"],"type":"string"}},"description":"upstream response code vs syslog severity mapping","additionalProperties":false,"type":"object"},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"include_resp_body_expr":{"minItems":1,"items":{"type":"array"},"type":"array"},"include_resp_body":{"default":false,"type":"boolean"},"tags":{"minItems":1,"default":["apisix"],"items":{"pattern":"^(?!tag=)[ -~]*","type":"string"},"type":"array"},"ssl_verify":{"default":true,"type":"boolean"},"log_format":{"type":"object"},"name":{"type":"string","default":"loggly"},"include_req_body":{"default":false,"type":"boolean"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"retry_delay":{"default":1,"minimum":0,"type":"integer"},"buffer_duration":{"default":60,"minimum":1,"type":"integer"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"severity":{"description":"base severity log level","default":"INFO","enum":["CRIT","crit","ERR","err","WARNING","warning","NOTICE","notice","INFO","info","DEBUG","debug","EMEGR","emegr","ALERT","alert"],"type":"string"},"include_req_body_expr":{"minItems":1,"items":{"type":"array"},"type":"array"}},"required":["customer_token"],"type":"object"}},"serverless-pre-function":{"version":0.1,"priority":10000,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"phase":{"default":"access","enum":["rewrite","access","header_filter","body_filter","log","before_proxy"],"type":"string"},"functions":{"minItems":1,"items":{"type":"string"},"type":"array"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"required":["functions"],"type":"object"}},"inspect":{"version":0.1,"priority":200,"schema":{"properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"response-rewrite":{"version":0.1,"priority":899,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"body":{"type":"string","description":"new body for response"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"status_code":{"maximum":598,"description":"new status code for response","minimum":200,"type":"integer"},"vars":{"type":"array"},"filters":{"minItems":1,"description":"a group of filters that modify response bodyby replacing one specified string by another","items":{"properties":{"regex":{"description":"match pattern on response body","minLength":1,"type":"string"},"scope":{"default":"once","description":"regex substitution range","enum":["once","global"],"type":"string"},"replace":{"type":"string","description":"regex substitution content"},"options":{"description":"regex options","default":"jo","type":"string"}},"description":"filter that modifies response body","required":["regex","replace"],"type":"object"},"type":"array"},"body_base64":{"description":"whether new body for response need base64 decode before return","default":false,"type":"boolean"},"headers":{"anyOf":[{"minProperties":1,"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}},"type":"object"},{"properties":{"add":{"minItems":1,"items":{"pattern":"^[^:]+:[^:]*[^/]$","type":"string"},"type":"array"},"remove":{"minItems":1,"items":{"pattern":"^[^:]+$","type":"string"},"type":"array"},"set":{"minProperties":1,"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}},"type":"object"}}}],"description":"new headers for response"}},"dependencies":{"filters":{"not":{"required":["body"]}},"body":{"not":{"required":["filters"]}}},"type":"object"}},"datadog":{"metadata_schema":{"properties":{"host":{"default":"127.0.0.1","type":"string"},"port":{"default":8125,"type":"integer","minimum":0},"constant_tags":{"default":["source:apisix"],"items":{"type":"string"},"type":"array"},"namespace":{"default":"apisix","type":"string"}},"type":"object"},"version":0.1,"priority":495,"schema":{"properties":{"prefer_name":{"default":true,"type":"boolean"},"batch_max_size":{"default":1000,"minimum":1,"type":"integer"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"retry_delay":{"default":1,"minimum":0,"type":"integer"},"buffer_duration":{"default":60,"minimum":1,"type":"integer"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"name":{"type":"string","default":"datadog"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"kafka-proxy":{"version":0.1,"priority":508,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"sasl":{"properties":{"password":{"type":"string"},"username":{"type":"string"}},"required":["username","password"],"type":"object"}},"encrypt_fields":["sasl.password"],"type":"object"}},"proxy-control":{"version":0.1,"priority":21990,"schema":{"properties":{"request_buffering":{"default":true,"type":"boolean"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"$comment":"this is a mark for our injected plugin schema","type":"object"}},"tcp-logger":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"host":{"type":"string"},"batch_max_size":{"default":1000,"minimum":1,"type":"integer"},"log_format":{"type":"object"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"tls":{"default":false,"type":"boolean"},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"name":{"type":"string","default":"tcp logger"},"include_req_body":{"default":false,"type":"boolean"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"retry_delay":{"default":1,"minimum":0,"type":"integer"},"port":{"minimum":0,"type":"integer"},"timeout":{"default":1000,"type":"integer","minimum":1},"tls_options":{"type":"string"},"buffer_duration":{"default":60,"minimum":1,"type":"integer"}},"required":["host","port"],"type":"object"},"priority":405},"fsc":{"metadata_schema":{},"version":0.1,"priority":1,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"manager_public_key":{"type":"string"},"fsc_group_id":{"type":"string"},"internal_cert_chain":{"type":"string"},"internal_key":{"type":"string"},"tx_log_url":{"type":"string"},"registration":{"properties":{"inway_name":{"type":"string"},"controller_uri":{"type":"string"},"inway_address":{"type":"string"}},"required":["controller_uri","inway_address","inway_name"],"type":"object"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"required":["manager_public_key","fsc_group_id","internal_cert_chain","internal_key","registration"],"type":"object"}},"serverless-post-function":{"version":0.1,"priority":-2000,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"phase":{"default":"access","enum":["rewrite","access","header_filter","body_filter","log","before_proxy"],"type":"string"},"functions":{"minItems":1,"items":{"type":"string"},"type":"array"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"required":["functions"],"type":"object"}}},"stream_plugins":{"limit-conn":{"version":0.1,"priority":1003,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"conn":{"exclusiveMinimum":0,"type":"integer"},"only_use_default_delay":{"default":false,"type":"boolean"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"key":{"type":"string"},"default_conn_delay":{"exclusiveMinimum":0,"type":"number"},"burst":{"minimum":0,"type":"integer"},"key_type":{"enum":["var","var_combination"],"default":"var","type":"string"}},"required":["conn","burst","default_conn_delay","key"],"type":"object"}},"syslog":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"priority":401,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"host":{"type":"string"},"pool_size":{"default":5,"type":"integer","minimum":5},"log_format":{"type":"object"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"buffer_duration":{"default":60,"minimum":1,"type":"integer"},"tls":{"default":false,"type":"boolean"},"inactive_timeout":{"default":5,"minimum":1,"type":"integer"},"max_retry_count":{"default":0,"minimum":0,"type":"integer"},"flush_limit":{"default":4096,"type":"integer","minimum":1},"drop_limit":{"default":1048576,"type":"integer"},"sock_type":{"default":"tcp","enum":["tcp","udp"],"type":"string"},"retry_delay":{"default":1,"minimum":0,"type":"integer"},"port":{"type":"integer"},"timeout":{"default":3000,"type":"integer","minimum":1},"batch_max_size":{"default":1000,"minimum":1,"type":"integer"},"name":{"type":"string","default":"stream sys logger"}},"required":["host","port"],"type":"object"}},"ip-restriction":{"version":0.1,"priority":3000,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"blacklist":{"minItems":1,"items":{"anyOf":[{"title":"IPv4","format":"ipv4","type":"string"},{"title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$","type":"string"},{"title":"IPv6","format":"ipv6","type":"string"},{"title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$","type":"string"}]},"type":"array"},"whitelist":{"minItems":1,"items":{"anyOf":[{"title":"IPv4","format":"ipv4","type":"string"},{"title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$","type":"string"},{"title":"IPv6","format":"ipv6","type":"string"},{"title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$","type":"string"}]},"type":"array"},"message":{"maxLength":1024,"default":"Your IP address is not allowed","type":"string","minLength":1},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"oneOf":[{"required":["whitelist"]},{"required":["blacklist"]}],"type":"object"}},"mqtt-proxy":{"version":0.1,"priority":1000,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"protocol_name":{"type":"string"},"protocol_level":{"type":"integer"},"_meta":{"properties":{"disable":{"type":"boolean"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"required":["protocol_name","protocol_level"],"type":"object"}}},"main":{"plugins":{"items":{"properties":{"name":{"minLength":1,"type":"string"},"stream":{"type":"boolean"},"additionalProperties":false},"required":["name"],"type":"object"},"type":"array"},"global_rule":{"additionalProperties":false,"properties":{"plugins":{"type":"object"},"update_time":{"type":"integer"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"create_time":{"type":"integer"}},"required":["id","plugins"],"type":"object"},"consumer":{"additionalProperties":false,"properties":{"plugins":{"type":"object"},"username":{"maxLength":100,"type":"string","pattern":"^[a-zA-Z0-9_]+$","minLength":1},"update_time":{"type":"integer"},"labels":{"description":"key/value pairs to specify attributes","patternProperties":{".*":{"pattern":"^\\S+$","type":"string","maxLength":256,"description":"value of label","minLength":1}},"type":"object"},"group_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"desc":{"maxLength":256,"type":"string"},"create_time":{"type":"integer"}},"required":["username"],"type":"object"},"route":{"allOf":[{"oneOf":[{"required":["uri"]},{"required":["uris"]}]},{"oneOf":[{"not":{"anyOf":[{"required":["host"]},{"required":["hosts"]}]}},{"required":["host"]},{"required":["hosts"]}]},{"oneOf":[{"not":{"anyOf":[{"required":["remote_addr"]},{"required":["remote_addrs"]}]}},{"required":["remote_addr"]},{"required":["remote_addrs"]}]}],"additionalProperties":false,"type":"object","not":{"anyOf":[{"required":["script","plugins"]},{"required":["script","plugin_config_id"]}]},"properties":{"plugin_config_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"uris":{"minItems":1,"uniqueItems":true,"items":{"type":"string","description":"HTTP uri"},"type":"array"},"priority":{"default":0,"type":"integer"},"methods":{"uniqueItems":true,"items":{"description":"HTTP method","enum":["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS","CONNECT","TRACE","PURGE"],"type":"string"},"type":"array"},"hosts":{"minItems":1,"uniqueItems":true,"items":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"type":"array"},"remote_addrs":{"minItems":1,"uniqueItems":true,"items":{"description":"client IP","anyOf":[{"title":"IPv4","format":"ipv4","type":"string"},{"title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$","type":"string"},{"title":"IPv6","format":"ipv6","type":"string"},{"title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$","type":"string"}],"type":"string"},"type":"array"},"filter_func":{"type":"string","pattern":"^function","minLength":10},"script_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"uri":{"maxLength":4096,"type":"string","minLength":1},"upstream_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"labels":{"description":"key/value pairs to specify attributes","patternProperties":{".*":{"pattern":"^\\S+$","type":"string","maxLength":256,"description":"value of label","minLength":1}},"type":"object"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"script":{"maxLength":102400,"type":"string","minLength":10},"remote_addr":{"description":"client IP","anyOf":[{"title":"IPv4","format":"ipv4","type":"string"},{"title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$","type":"string"},{"title":"IPv6","format":"ipv6","type":"string"},{"title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$","type":"string"}],"type":"string"},"update_time":{"type":"integer"},"desc":{"maxLength":256,"type":"string"},"status":{"default":1,"description":"route status, 1 to enable, 0 to disable","enum":[1,0],"type":"integer"},"create_time":{"type":"integer"},"enable_websocket":{"type":"boolean","description":"enable websocket for request"},"service_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"upstream":{"oneOf":[{"required":["nodes"]},{"required":["service_name","discovery_type"]}],"additionalProperties":false,"type":"object","properties":{"type":{"description":"algorithms of load balancing","default":"roundrobin","type":"string"},"nodes":{"anyOf":[{"patternProperties":{".*":{"description":"weight of node","minimum":0,"type":"integer"}},"type":"object"},{"items":{"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"metadata":{"type":"object","description":"metadata of node"},"priority":{"description":"priority of node","default":0,"type":"integer"},"port":{"description":"port of node","minimum":1,"type":"integer"},"weight":{"description":"weight of node","minimum":0,"type":"integer"}},"required":["host","weight"],"type":"object"},"type":"array"}]},"labels":{"description":"key/value pairs to specify attributes","patternProperties":{".*":{"pattern":"^\\S+$","type":"string","maxLength":256,"description":"value of label","minLength":1}},"type":"object"},"discovery_type":{"type":"string","description":"discovery type"},"scheme":{"enum":["grpc","grpcs","http","https","tcp","tls","udp","kafka"],"description":"The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka.","default":"http"},"discovery_args":{"properties":{"namespace_id":{"type":"string","description":"namespace id"},"group_name":{"type":"string","description":"group name"}},"type":"object"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"service_name":{"maxLength":256,"minLength":1,"type":"string"},"name":{"maxLength":100,"minLength":1,"type":"string"},"pass_host":{"default":"pass","description":"mod of host passing","enum":["pass","node","rewrite"],"type":"string"},"upstream_host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"update_time":{"type":"integer"},"desc":{"maxLength":256,"type":"string"},"checks":{"anyOf":[{"required":["active"]},{"required":["active","passive"]}],"properties":{"active":{"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"healthy":{"properties":{"interval":{"default":1,"type":"integer","minimum":1},"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[200,302],"type":"array"},"successes":{"maximum":254,"default":2,"type":"integer","minimum":1}},"type":"object"},"concurrency":{"default":10,"type":"integer"},"http_path":{"default":"/","type":"string"},"https_verify_certificate":{"default":true,"type":"boolean"},"req_headers":{"minItems":1,"items":{"uniqueItems":true,"type":"string"},"type":"array"},"port":{"maximum":65535,"type":"integer","minimum":1},"timeout":{"default":1,"type":"number"},"unhealthy":{"properties":{"http_failures":{"maximum":254,"default":5,"type":"integer","minimum":1},"tcp_failures":{"maximum":254,"default":2,"type":"integer","minimum":1},"timeouts":{"maximum":254,"default":3,"type":"integer","minimum":1},"interval":{"default":1,"type":"integer","minimum":1},"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[429,404,500,501,502,503,504,505],"type":"array"}},"type":"object"},"type":{"enum":["http","https","tcp"],"default":"http","type":"string"}},"type":"object"},"passive":{"properties":{"unhealthy":{"properties":{"timeouts":{"maximum":254,"default":7,"type":"integer","minimum":0},"http_failures":{"maximum":254,"default":5,"type":"integer","minimum":0},"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[429,500,503],"type":"array"},"tcp_failures":{"maximum":254,"default":2,"type":"integer","minimum":0}},"type":"object"},"type":{"enum":["http","https","tcp"],"default":"http","type":"string"},"healthy":{"properties":{"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308],"type":"array"},"successes":{"maximum":254,"default":5,"type":"integer","minimum":0}},"type":"object"}},"type":"object"}},"additionalProperties":false,"type":"object"},"create_time":{"type":"integer"},"retries":{"minimum":0,"type":"integer"},"retry_timeout":{"minimum":0,"type":"number"},"hash_on":{"default":"vars","enum":["vars","header","cookie","consumer","vars_combinations"],"type":"string"},"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"timeout":{"properties":{"connect":{"exclusiveMinimum":0,"type":"number"},"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"}},"required":["connect","send","read"],"type":"object"},"keepalive_pool":{"properties":{"requests":{"default":1000,"minimum":1,"type":"integer"},"size":{"default":320,"minimum":1,"type":"integer"},"idle_timeout":{"default":60,"minimum":0,"type":"number"}},"type":"object"},"tls":{"properties":{"verify":{"description":"Turn on server certificate verification, currently only kafka upstream is supported","default":false,"type":"boolean"},"client_key":{"maxLength":65536,"type":"string","minLength":128},"client_cert_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"client_cert":{"maxLength":65536,"type":"string","minLength":128}},"dependencies":{"client_cert":{"required":["client_key"]},"client_cert_id":{"not":{"required":["client_cert","client_key"]}},"client_key":{"required":["client_cert"]}},"type":"object"}}},"plugins":{"type":"object"},"timeout":{"properties":{"connect":{"exclusiveMinimum":0,"type":"number"},"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"}},"required":["connect","send","read"],"type":"object"},"name":{"maxLength":100,"minLength":1,"type":"string"},"vars":{"type":"array"}},"anyOf":[{"required":["plugins","uri"]},{"required":["upstream","uri"]},{"required":["upstream_id","uri"]},{"required":["service_id","uri"]},{"required":["plugins","uris"]},{"required":["upstream","uris"]},{"required":["upstream_id","uris"]},{"required":["service_id","uris"]},{"required":["script","uri"]},{"required":["script","uris"]}]},"upstream":{"oneOf":[{"required":["nodes"]},{"required":["service_name","discovery_type"]}],"additionalProperties":false,"type":"object","properties":{"type":{"description":"algorithms of load balancing","default":"roundrobin","type":"string"},"nodes":{"anyOf":[{"patternProperties":{".*":{"description":"weight of node","minimum":0,"type":"integer"}},"type":"object"},{"items":{"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"metadata":{"type":"object","description":"metadata of node"},"priority":{"description":"priority of node","default":0,"type":"integer"},"port":{"description":"port of node","minimum":1,"type":"integer"},"weight":{"description":"weight of node","minimum":0,"type":"integer"}},"required":["host","weight"],"type":"object"},"type":"array"}]},"labels":{"description":"key/value pairs to specify attributes","patternProperties":{".*":{"pattern":"^\\S+$","type":"string","maxLength":256,"description":"value of label","minLength":1}},"type":"object"},"discovery_type":{"type":"string","description":"discovery type"},"scheme":{"enum":["grpc","grpcs","http","https","tcp","tls","udp","kafka"],"description":"The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka.","default":"http"},"discovery_args":{"properties":{"namespace_id":{"type":"string","description":"namespace id"},"group_name":{"type":"string","description":"group name"}},"type":"object"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"service_name":{"maxLength":256,"minLength":1,"type":"string"},"name":{"maxLength":100,"minLength":1,"type":"string"},"pass_host":{"default":"pass","description":"mod of host passing","enum":["pass","node","rewrite"],"type":"string"},"upstream_host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"update_time":{"type":"integer"},"desc":{"maxLength":256,"type":"string"},"checks":{"anyOf":[{"required":["active"]},{"required":["active","passive"]}],"properties":{"active":{"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"healthy":{"properties":{"interval":{"default":1,"type":"integer","minimum":1},"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[200,302],"type":"array"},"successes":{"maximum":254,"default":2,"type":"integer","minimum":1}},"type":"object"},"concurrency":{"default":10,"type":"integer"},"http_path":{"default":"/","type":"string"},"https_verify_certificate":{"default":true,"type":"boolean"},"req_headers":{"minItems":1,"items":{"uniqueItems":true,"type":"string"},"type":"array"},"port":{"maximum":65535,"type":"integer","minimum":1},"timeout":{"default":1,"type":"number"},"unhealthy":{"properties":{"http_failures":{"maximum":254,"default":5,"type":"integer","minimum":1},"tcp_failures":{"maximum":254,"default":2,"type":"integer","minimum":1},"timeouts":{"maximum":254,"default":3,"type":"integer","minimum":1},"interval":{"default":1,"type":"integer","minimum":1},"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[429,404,500,501,502,503,504,505],"type":"array"}},"type":"object"},"type":{"enum":["http","https","tcp"],"default":"http","type":"string"}},"type":"object"},"passive":{"properties":{"unhealthy":{"properties":{"timeouts":{"maximum":254,"default":7,"type":"integer","minimum":0},"http_failures":{"maximum":254,"default":5,"type":"integer","minimum":0},"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[429,500,503],"type":"array"},"tcp_failures":{"maximum":254,"default":2,"type":"integer","minimum":0}},"type":"object"},"type":{"enum":["http","https","tcp"],"default":"http","type":"string"},"healthy":{"properties":{"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308],"type":"array"},"successes":{"maximum":254,"default":5,"type":"integer","minimum":0}},"type":"object"}},"type":"object"}},"additionalProperties":false,"type":"object"},"create_time":{"type":"integer"},"retries":{"minimum":0,"type":"integer"},"retry_timeout":{"minimum":0,"type":"number"},"hash_on":{"default":"vars","enum":["vars","header","cookie","consumer","vars_combinations"],"type":"string"},"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"timeout":{"properties":{"connect":{"exclusiveMinimum":0,"type":"number"},"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"}},"required":["connect","send","read"],"type":"object"},"keepalive_pool":{"properties":{"requests":{"default":1000,"minimum":1,"type":"integer"},"size":{"default":320,"minimum":1,"type":"integer"},"idle_timeout":{"default":60,"minimum":0,"type":"number"}},"type":"object"},"tls":{"properties":{"verify":{"description":"Turn on server certificate verification, currently only kafka upstream is supported","default":false,"type":"boolean"},"client_key":{"maxLength":65536,"type":"string","minLength":128},"client_cert_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"client_cert":{"maxLength":65536,"type":"string","minLength":128}},"dependencies":{"client_cert":{"required":["client_key"]},"client_cert_id":{"not":{"required":["client_cert","client_key"]}},"client_key":{"required":["client_cert"]}},"type":"object"}}},"ssl":{"else":{"required":["key","cert"]},"additionalProperties":false,"type":"object","properties":{"sni":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"cert":{"oneOf":[{"maxLength":65536,"type":"string","minLength":128},{"pattern":"^\\$(secret|env)://","type":"string"}]},"snis":{"minItems":1,"items":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"type":"array"},"type":{"enum":["server","client"],"description":"ssl certificate type, server to server certificate, client to client certificate for upstream","default":"server","type":"string"},"update_time":{"type":"integer"},"ssl_protocols":{"items":{"enum":["TLSv1.1","TLSv1.2","TLSv1.3"]},"uniqueItems":true,"description":"set ssl protocols","maxItems":3,"type":"array"},"create_time":{"type":"integer"},"status":{"default":1,"description":"ssl status, 1 to enable, 0 to disable","enum":[1,0],"type":"integer"},"labels":{"description":"key/value pairs to specify attributes","patternProperties":{".*":{"pattern":"^\\S+$","type":"string","maxLength":256,"description":"value of label","minLength":1}},"type":"object"},"certs":{"items":{"maxLength":65536,"type":"string","minLength":128},"type":"array"},"key":{"oneOf":[{"maxLength":65536,"type":"string","minLength":128},{"pattern":"^\\$(secret|env)://","type":"string"}]},"client":{"properties":{"depth":{"default":1,"type":"integer","minimum":0},"ca":{"maxLength":65536,"type":"string","minLength":128},"skip_mtls_uri_regex":{"minItems":1,"uniqueItems":true,"items":{"type":"string","description":"uri regular expression to skip mtls"},"type":"array"}},"required":["ca"],"type":"object"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"keys":{"items":{"maxLength":65536,"type":"string","minLength":128},"type":"array"}},"if":{"properties":{"type":{"enum":["server"]}}},"then":{"oneOf":[{"required":["sni","key","cert"]},{"required":["snis","key","cert"]}]}},"stream_route":{"properties":{"sni":{"description":"server name indication","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"protocol":{"properties":{"name":{"type":"string"},"conf":{"type":"object","description":"protocol-specific configuration"},"logger":{"items":{"dependencies":{"name":["conf"]},"additionalProperties":false,"properties":{"name":{"type":"string"},"filter":{"type":"array","description":"logger filter rules"},"conf":{"type":"object","description":"logger plugin configuration"}}},"type":"array"},"superior_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]}},"required":["name"],"type":"object"},"remote_addr":{"description":"client IP","anyOf":[{"title":"IPv4","format":"ipv4","type":"string"},{"title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$","type":"string"},{"title":"IPv6","format":"ipv6","type":"string"},{"title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$","type":"string"}],"type":"string"},"update_time":{"type":"integer"},"desc":{"maxLength":256,"type":"string"},"plugins":{"type":"object"},"create_time":{"type":"integer"},"service_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"server_addr":{"description":"server IP","anyOf":[{"title":"IPv4","format":"ipv4","type":"string"},{"title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$","type":"string"},{"title":"IPv6","format":"ipv6","type":"string"},{"title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$","type":"string"}],"type":"string"},"upstream_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"labels":{"description":"key/value pairs to specify attributes","patternProperties":{".*":{"pattern":"^\\S+$","type":"string","maxLength":256,"description":"value of label","minLength":1}},"type":"object"},"server_port":{"type":"integer","description":"server port"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"upstream":{"oneOf":[{"required":["nodes"]},{"required":["service_name","discovery_type"]}],"additionalProperties":false,"type":"object","properties":{"type":{"description":"algorithms of load balancing","default":"roundrobin","type":"string"},"nodes":{"anyOf":[{"patternProperties":{".*":{"description":"weight of node","minimum":0,"type":"integer"}},"type":"object"},{"items":{"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"metadata":{"type":"object","description":"metadata of node"},"priority":{"description":"priority of node","default":0,"type":"integer"},"port":{"description":"port of node","minimum":1,"type":"integer"},"weight":{"description":"weight of node","minimum":0,"type":"integer"}},"required":["host","weight"],"type":"object"},"type":"array"}]},"labels":{"description":"key/value pairs to specify attributes","patternProperties":{".*":{"pattern":"^\\S+$","type":"string","maxLength":256,"description":"value of label","minLength":1}},"type":"object"},"discovery_type":{"type":"string","description":"discovery type"},"scheme":{"enum":["grpc","grpcs","http","https","tcp","tls","udp","kafka"],"description":"The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka.","default":"http"},"discovery_args":{"properties":{"namespace_id":{"type":"string","description":"namespace id"},"group_name":{"type":"string","description":"group name"}},"type":"object"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"service_name":{"maxLength":256,"minLength":1,"type":"string"},"name":{"maxLength":100,"minLength":1,"type":"string"},"pass_host":{"default":"pass","description":"mod of host passing","enum":["pass","node","rewrite"],"type":"string"},"upstream_host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"update_time":{"type":"integer"},"desc":{"maxLength":256,"type":"string"},"checks":{"anyOf":[{"required":["active"]},{"required":["active","passive"]}],"properties":{"active":{"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"healthy":{"properties":{"interval":{"default":1,"type":"integer","minimum":1},"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[200,302],"type":"array"},"successes":{"maximum":254,"default":2,"type":"integer","minimum":1}},"type":"object"},"concurrency":{"default":10,"type":"integer"},"http_path":{"default":"/","type":"string"},"https_verify_certificate":{"default":true,"type":"boolean"},"req_headers":{"minItems":1,"items":{"uniqueItems":true,"type":"string"},"type":"array"},"port":{"maximum":65535,"type":"integer","minimum":1},"timeout":{"default":1,"type":"number"},"unhealthy":{"properties":{"http_failures":{"maximum":254,"default":5,"type":"integer","minimum":1},"tcp_failures":{"maximum":254,"default":2,"type":"integer","minimum":1},"timeouts":{"maximum":254,"default":3,"type":"integer","minimum":1},"interval":{"default":1,"type":"integer","minimum":1},"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[429,404,500,501,502,503,504,505],"type":"array"}},"type":"object"},"type":{"enum":["http","https","tcp"],"default":"http","type":"string"}},"type":"object"},"passive":{"properties":{"unhealthy":{"properties":{"timeouts":{"maximum":254,"default":7,"type":"integer","minimum":0},"http_failures":{"maximum":254,"default":5,"type":"integer","minimum":0},"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[429,500,503],"type":"array"},"tcp_failures":{"maximum":254,"default":2,"type":"integer","minimum":0}},"type":"object"},"type":{"enum":["http","https","tcp"],"default":"http","type":"string"},"healthy":{"properties":{"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308],"type":"array"},"successes":{"maximum":254,"default":5,"type":"integer","minimum":0}},"type":"object"}},"type":"object"}},"additionalProperties":false,"type":"object"},"create_time":{"type":"integer"},"retries":{"minimum":0,"type":"integer"},"retry_timeout":{"minimum":0,"type":"number"},"hash_on":{"default":"vars","enum":["vars","header","cookie","consumer","vars_combinations"],"type":"string"},"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"timeout":{"properties":{"connect":{"exclusiveMinimum":0,"type":"number"},"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"}},"required":["connect","send","read"],"type":"object"},"keepalive_pool":{"properties":{"requests":{"default":1000,"minimum":1,"type":"integer"},"size":{"default":320,"minimum":1,"type":"integer"},"idle_timeout":{"default":60,"minimum":0,"type":"number"}},"type":"object"},"tls":{"properties":{"verify":{"description":"Turn on server certificate verification, currently only kafka upstream is supported","default":false,"type":"boolean"},"client_key":{"maxLength":65536,"type":"string","minLength":128},"client_cert_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"client_cert":{"maxLength":65536,"type":"string","minLength":128}},"dependencies":{"client_cert":{"required":["client_key"]},"client_cert_id":{"not":{"required":["client_cert","client_key"]}},"client_key":{"required":["client_cert"]}},"type":"object"}}}},"additionalProperties":false,"type":"object"},"upstream_hash_vars_schema":{"pattern":"^((uri|server_name|server_addr|request_uri|remote_port|remote_addr|query_string|host|hostname|mqtt_client_id)|arg_[0-9a-zA-z_-]+)$","type":"string"},"upstream_hash_header_schema":{"pattern":"^[a-zA-Z0-9-_]+$","type":"string"},"service":{"properties":{"plugins":{"type":"object"},"script":{"maxLength":102400,"type":"string","minLength":10},"upstream":{"oneOf":[{"required":["nodes"]},{"required":["service_name","discovery_type"]}],"additionalProperties":false,"type":"object","properties":{"type":{"description":"algorithms of load balancing","default":"roundrobin","type":"string"},"nodes":{"anyOf":[{"patternProperties":{".*":{"description":"weight of node","minimum":0,"type":"integer"}},"type":"object"},{"items":{"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"metadata":{"type":"object","description":"metadata of node"},"priority":{"description":"priority of node","default":0,"type":"integer"},"port":{"description":"port of node","minimum":1,"type":"integer"},"weight":{"description":"weight of node","minimum":0,"type":"integer"}},"required":["host","weight"],"type":"object"},"type":"array"}]},"labels":{"description":"key/value pairs to specify attributes","patternProperties":{".*":{"pattern":"^\\S+$","type":"string","maxLength":256,"description":"value of label","minLength":1}},"type":"object"},"discovery_type":{"type":"string","description":"discovery type"},"scheme":{"enum":["grpc","grpcs","http","https","tcp","tls","udp","kafka"],"description":"The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka.","default":"http"},"discovery_args":{"properties":{"namespace_id":{"type":"string","description":"namespace id"},"group_name":{"type":"string","description":"group name"}},"type":"object"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"service_name":{"maxLength":256,"minLength":1,"type":"string"},"name":{"maxLength":100,"minLength":1,"type":"string"},"pass_host":{"default":"pass","description":"mod of host passing","enum":["pass","node","rewrite"],"type":"string"},"upstream_host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"update_time":{"type":"integer"},"desc":{"maxLength":256,"type":"string"},"checks":{"anyOf":[{"required":["active"]},{"required":["active","passive"]}],"properties":{"active":{"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"healthy":{"properties":{"interval":{"default":1,"type":"integer","minimum":1},"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[200,302],"type":"array"},"successes":{"maximum":254,"default":2,"type":"integer","minimum":1}},"type":"object"},"concurrency":{"default":10,"type":"integer"},"http_path":{"default":"/","type":"string"},"https_verify_certificate":{"default":true,"type":"boolean"},"req_headers":{"minItems":1,"items":{"uniqueItems":true,"type":"string"},"type":"array"},"port":{"maximum":65535,"type":"integer","minimum":1},"timeout":{"default":1,"type":"number"},"unhealthy":{"properties":{"http_failures":{"maximum":254,"default":5,"type":"integer","minimum":1},"tcp_failures":{"maximum":254,"default":2,"type":"integer","minimum":1},"timeouts":{"maximum":254,"default":3,"type":"integer","minimum":1},"interval":{"default":1,"type":"integer","minimum":1},"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[429,404,500,501,502,503,504,505],"type":"array"}},"type":"object"},"type":{"enum":["http","https","tcp"],"default":"http","type":"string"}},"type":"object"},"passive":{"properties":{"unhealthy":{"properties":{"timeouts":{"maximum":254,"default":7,"type":"integer","minimum":0},"http_failures":{"maximum":254,"default":5,"type":"integer","minimum":0},"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[429,500,503],"type":"array"},"tcp_failures":{"maximum":254,"default":2,"type":"integer","minimum":0}},"type":"object"},"type":{"enum":["http","https","tcp"],"default":"http","type":"string"},"healthy":{"properties":{"http_statuses":{"items":{"maximum":599,"type":"integer","minimum":200},"uniqueItems":true,"minItems":1,"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308],"type":"array"},"successes":{"maximum":254,"default":5,"type":"integer","minimum":0}},"type":"object"}},"type":"object"}},"additionalProperties":false,"type":"object"},"create_time":{"type":"integer"},"retries":{"minimum":0,"type":"integer"},"retry_timeout":{"minimum":0,"type":"number"},"hash_on":{"default":"vars","enum":["vars","header","cookie","consumer","vars_combinations"],"type":"string"},"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"timeout":{"properties":{"connect":{"exclusiveMinimum":0,"type":"number"},"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"}},"required":["connect","send","read"],"type":"object"},"keepalive_pool":{"properties":{"requests":{"default":1000,"minimum":1,"type":"integer"},"size":{"default":320,"minimum":1,"type":"integer"},"idle_timeout":{"default":60,"minimum":0,"type":"number"}},"type":"object"},"tls":{"properties":{"verify":{"description":"Turn on server certificate verification, currently only kafka upstream is supported","default":false,"type":"boolean"},"client_key":{"maxLength":65536,"type":"string","minLength":128},"client_cert_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"client_cert":{"maxLength":65536,"type":"string","minLength":128}},"dependencies":{"client_cert":{"required":["client_key"]},"client_cert_id":{"not":{"required":["client_cert","client_key"]}},"client_key":{"required":["client_cert"]}},"type":"object"}}},"desc":{"maxLength":256,"type":"string"},"name":{"maxLength":100,"minLength":1,"type":"string"},"enable_websocket":{"type":"boolean","description":"enable websocket for request"},"hosts":{"minItems":1,"uniqueItems":true,"items":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"type":"array"},"upstream_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"labels":{"description":"key/value pairs to specify attributes","patternProperties":{".*":{"pattern":"^\\S+$","type":"string","maxLength":256,"description":"value of label","minLength":1}},"type":"object"},"update_time":{"type":"integer"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"create_time":{"type":"integer"}},"additionalProperties":false,"type":"object"},"plugin_config":{"additionalProperties":false,"properties":{"name":{"type":"string"},"desc":{"maxLength":256,"type":"string"},"create_time":{"type":"integer"},"labels":{"description":"key/value pairs to specify attributes","patternProperties":{".*":{"pattern":"^\\S+$","type":"string","maxLength":256,"description":"value of label","minLength":1}},"type":"object"},"update_time":{"type":"integer"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"plugins":{"type":"object"}},"required":["id","plugins"],"type":"object"},"proto":{"additionalProperties":false,"properties":{"create_time":{"type":"integer"},"content":{"maxLength":1048576,"type":"string","minLength":1},"update_time":{"type":"integer"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"desc":{"maxLength":256,"type":"string"}},"required":["content"],"type":"object"},"consumer_group":{"additionalProperties":false,"properties":{"plugins":{"type":"object"},"create_time":{"type":"integer"},"labels":{"description":"key/value pairs to specify attributes","patternProperties":{".*":{"pattern":"^\\S+$","type":"string","maxLength":256,"description":"value of label","minLength":1}},"type":"object"},"update_time":{"type":"integer"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"desc":{"maxLength":256,"type":"string"}},"required":["id","plugins"],"type":"object"}}}
